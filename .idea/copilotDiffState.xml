<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/petpal/app/src/main/java/com/example/petpal/presentation/navigation/Screen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/petpal/app/src/main/java/com/example/petpal/presentation/navigation/Screen.kt" />
              <option name="updatedContent" value="sealed class Screen(val route: String) {&#10;    // ...existing code...&#10;&#10;    // Order Screens&#10;    object OrderForm : Screen(&quot;order_form/{serviceType}&quot;) {&#10;        fun createRoute(serviceType: String) = &quot;order_form/$serviceType&quot;&#10;    }&#10;    object PetSelection : Screen(&quot;pet_selection&quot;)&#10;    object TierSelection : Screen(&quot;tier_selection&quot;)&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/petpal/presentation/navigation/AppNavigation.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/petpal/presentation/navigation/AppNavigation.kt" />
              <option name="originalContent" value="package com.example.petpal.presentation.navigation&#10;&#10;import androidx.compose.animation.core.tween&#10;import androidx.compose.animation.slideInVertically&#10;import androidx.compose.animation.slideOutVertically&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.ui.Modifier&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.NavType&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.rememberNavController&#10;import androidx.navigation.navArgument&#10;import com.example.petpal.data.repository.AuthRepository&#10;import com.example.petpal.data.model.Pet&#10;import com.example.petpal.presentation.view.AddPetScreen&#10;import com.example.petpal.presentation.view.ChangePasswordScreen&#10;import com.example.petpal.presentation.view.EditProfileScreen&#10;import com.example.petpal.presentation.view.HistoryScreen&#10;import com.example.petpal.presentation.view.HomeScreen&#10;import com.example.petpal.presentation.view.LoginScreen&#10;import com.example.petpal.presentation.view.AddPetScreen&#10;import com.example.petpal.presentation.view.BranchSelectionScreen&#10;import com.example.petpal.presentation.view.ChangePasswordScreen&#10;import com.example.petpal.presentation.view.EditProfileScreen&#10;import com.example.petpal.presentation.view.HistoryScreen&#10;import com.example.petpal.presentation.view.HomeScreen&#10;import com.example.petpal.presentation.view.LoginScreen&#10;import com.example.petpal.presentation.view.OnBoardingScreen&#10;import com.example.petpal.presentation.view.OrderFormScreen&#10;import com.example.petpal.presentation.view.PaymentScreen&#10;import com.example.petpal.presentation.view.PemesananScreen&#10;import com.example.petpal.presentation.view.PetListScreen&#10;import com.example.petpal.presentation.view.PetSelectionScreen&#10;import com.example.petpal.presentation.view.ProfileScreen&#10;import com.example.petpal.presentation.view.RegisterScreen&#10;import com.example.petpal.presentation.view.TierSelectionScreen&#10;import com.example.petpal.presentation.component.PetPalBottomBar&#10;&#10;@Composable&#10;fun AppNavigation(navController: NavHostController = rememberNavController()) {&#10;    val authRepository = AuthRepository()&#10;&#10;    // Cek apakah user sudah login&#10;//    val startDestination = if (authRepository.currentUser != null) Screen.Home.route else Screen.OnBoarding.route&#10;    val startDestination = Screen.Login.route&#10;//    val startDestination = Screen.Home.route&#10;&#10;    Scaffold (&#10;        bottomBar = { PetPalBottomBar(navController) }&#10;    ){ paddingValues -&gt;&#10;        NavHost(&#10;            navController = navController,&#10;            startDestination = startDestination,&#10;            modifier = Modifier.padding(paddingValues)&#10;        ) {&#10;            // ONBOARDING&#10;            composable(Screen.OnBoarding.route) {&#10;                OnBoardingScreen(&#10;                    onNavigateToLogin = { navController.navigate(Screen.Login.route) },&#10;                    onNavigateToRegister = { navController.navigate(Screen.Register.route) }&#10;                )&#10;            }&#10;&#10;            // LOGIN&#10;            composable(Screen.Login.route) {&#10;                LoginScreen(&#10;                    onNavigateToRegister = {&#10;                        navController.navigate(Screen.Register.route){&#10;                            popUpTo(Screen.Login.route) { inclusive = true }&#10;                        }&#10;                    },&#10;                    onLoginSuccess = {&#10;                        navController.navigate(Screen.Home.route) {&#10;                            popUpTo(Screen.OnBoarding.route) { inclusive = true }&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;&#10;            // REGISTER&#10;            composable(Screen.Register.route) {&#10;                RegisterScreen(&#10;                    onNavigateToLogin = {&#10;                        navController.navigate(Screen.Login.route){&#10;                            popUpTo(Screen.Register.route) { inclusive = true }&#10;                        }&#10;                    },&#10;                    onRegisterSuccess = {&#10;                        // Langsung ke Home setelah sukses daftar&#10;                        navController.navigate(Screen.Home.route) {&#10;                            popUpTo(Screen.OnBoarding.route) { inclusive = true }&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;&#10;            // HOME&#10;            composable(Screen.Home.route) {&#10;                HomeScreen(&#10;                    onLogout = {&#10;                        authRepository.logout()&#10;                        // Kembali ke Login dan hapus history Home&#10;                        navController.navigate(Screen.Login.route) {&#10;                            popUpTo(Screen.Home.route) { inclusive = true }&#10;                            launchSingleTop = true&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;&#10;            // PESANAN&#10;            composable(Screen.Pesanan.route) {&#10;                PemesananScreen(&#10;                    onNavigateToOrderForm = { serviceType -&gt;&#10;                        navController.navigate(Screen.OrderForm.createRoute(serviceType))&#10;                    }&#10;                )&#10;            }&#10;&#10;            composable(Screen.Riwayat.route) {&#10;                HistoryScreen(&#10;                    onNavigateToHistory = { navController.navigate(Screen.Riwayat.route)},&#10;                )&#10;            }&#10;            composable(Screen.Profile.route) {&#10;                ProfileScreen(&#10;                    onNavigateToEditProfile = { navController.navigate(Screen.EditProfile.route) },&#10;                    onNavigateToPetList = { navController.navigate(Screen.PetList.route) },&#10;                    onLogout = {&#10;                        navController.navigate(Screen.Login.route) {&#10;                            popUpTo(0) { inclusive = true }&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;&#10;            // Sub-Pages Profile&#10;            composable(Screen.EditProfile.route) {&#10;                EditProfileScreen(&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    onNavigateToChangePassword = { navController.navigate(Screen.ChangePassword.route) }&#10;                )&#10;            }&#10;            composable(Screen.ChangePassword.route) {&#10;                ChangePasswordScreen (&#10;                    onNavigateBack = { navController.popBackStack() }&#10;                )&#10;            }&#10;&#10;            composable(Screen.PetList.route) {&#10;                PetListScreen(&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    onNavigateToAddPet = { navController.navigate(Screen.AddPet.route) }&#10;                )&#10;            }&#10;&#10;            composable(Screen.AddPet.route) {&#10;                AddPetScreen(&#10;                    onNavigateBack = { navController.popBackStack() }&#10;                )&#10;            }&#10;&#10;            // Order Form&#10;            composable(&#10;                route = Screen.OrderForm.route,&#10;                arguments = listOf(&#10;                    navArgument(&quot;serviceType&quot;) { type = NavType.StringType }&#10;                ),&#10;                enterTransition = {&#10;                    slideInVertically(&#10;                        initialOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                },&#10;                exitTransition = {&#10;                    slideOutVertically(&#10;                        targetOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                }&#10;            ) { backStackEntry -&gt;&#10;                val serviceType = backStackEntry.arguments?.getString(&quot;serviceType&quot;) ?: &quot;Boarding&quot;&#10;                val savedStateHandle = backStackEntry.savedStateHandle&#10;                val selectedTier = savedStateHandle.getStateFlow&lt;String?&gt;(&quot;selected_tier&quot;, null).collectAsState().value&#10;                val selectedPets = savedStateHandle.get&lt;List&lt;Pet&gt;&gt;(&quot;selected_pets&quot;)&#10;                val selectedBranch = savedStateHandle.getStateFlow&lt;String?&gt;(&quot;selected_branch&quot;, null).collectAsState().value&#10;                val startTime = savedStateHandle.getStateFlow&lt;String?&gt;(&quot;start_time&quot;, null).collectAsState().value&#10;                val startDate = savedStateHandle.getStateFlow&lt;String?&gt;(&quot;start_date&quot;, null).collectAsState().value&#10;                val endTime = savedStateHandle.getStateFlow&lt;String?&gt;(&quot;end_time&quot;, null).collectAsState().value&#10;                val endDate = savedStateHandle.getStateFlow&lt;String?&gt;(&quot;end_date&quot;, null).collectAsState().value&#10;&#10;                OrderFormScreen(&#10;                    serviceType = serviceType,&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    selectedTierFromNav = selectedTier,&#10;                    selectedPetsFromNav = selectedPets,&#10;                    selectedBranchFromNav = selectedBranch,&#10;                    startTimeFromNav = startTime,&#10;                    startDateFromNav = startDate,&#10;                    endTimeFromNav = endTime,&#10;                    endDateFromNav = endDate,&#10;                    onNavigateToPetSelection = { sTime, sDate, eTime, eDate -&gt;&#10;                        navController.currentBackStackEntry?.savedStateHandle?.apply {&#10;                            set(&quot;start_time&quot;, sTime)&#10;                            set(&quot;start_date&quot;, sDate)&#10;                            set(&quot;end_time&quot;, eTime)&#10;                            set(&quot;end_date&quot;, eDate)&#10;                        }&#10;                        navController.navigate(Screen.PetSelection.route)&#10;                    },&#10;                    onNavigateToTierSelection = { sTime, sDate, eTime, eDate -&gt;&#10;                        navController.currentBackStackEntry?.savedStateHandle?.apply {&#10;                            set(&quot;start_time&quot;, sTime)&#10;                            set(&quot;start_date&quot;, sDate)&#10;                            set(&quot;end_time&quot;, eTime)&#10;                            set(&quot;end_date&quot;, eDate)&#10;                        }&#10;                        navController.navigate(Screen.TierSelection.route)&#10;                    },&#10;                    onNavigateToBranchSelection = { sTime, sDate, eTime, eDate -&gt;&#10;                        navController.currentBackStackEntry?.savedStateHandle?.apply {&#10;                            set(&quot;start_time&quot;, sTime)&#10;                            set(&quot;start_date&quot;, sDate)&#10;                            set(&quot;end_time&quot;, eTime)&#10;                            set(&quot;end_date&quot;, eDate)&#10;                        }&#10;                        navController.navigate(Screen.BranchSelection.route)&#10;                    },&#10;                    onSubmitOrder = { petNames, sTime, sDate, eTime, eDate, tier, branch, notes, duration, tPrice, total -&gt;&#10;                        navController.currentBackStackEntry?.savedStateHandle?.apply {&#10;                            set(&quot;payment_service_type&quot;, serviceType)&#10;                            set(&quot;payment_pet_names&quot;, petNames)&#10;                            set(&quot;payment_start_time&quot;, sTime)&#10;                            set(&quot;payment_start_date&quot;, sDate)&#10;                            set(&quot;payment_end_time&quot;, eTime)&#10;                            set(&quot;payment_end_date&quot;, eDate)&#10;                            set(&quot;payment_tier&quot;, tier)&#10;                            set(&quot;payment_branch&quot;, branch)&#10;                            set(&quot;payment_duration&quot;, duration)&#10;                            set(&quot;payment_tier_price&quot;, tPrice)&#10;                            set(&quot;payment_total_price&quot;, total)&#10;                        }&#10;                        navController.navigate(Screen.Payment.route)&#10;                    }&#10;                )&#10;            }&#10;&#10;            // Pet Selection&#10;            composable(&#10;                route = Screen.PetSelection.route,&#10;                enterTransition = {&#10;                    slideInVertically(&#10;                        initialOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                },&#10;                exitTransition = {&#10;                    slideOutVertically(&#10;                        targetOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                }&#10;            ) { backStackEntry -&gt;&#10;                val previousEntry = navController.previousBackStackEntry&#10;                val initiallySelected = previousEntry?.savedStateHandle?.get&lt;List&lt;Pet&gt;&gt;(&quot;selected_pets&quot;).orEmpty()&#10;&#10;                PetSelectionScreen(&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    onNavigateToAddPet = {&#10;                        navController.navigate(Screen.AddPet.route)&#10;                    },&#10;                    onPetsSelected = { pets -&gt;&#10;                        navController.previousBackStackEntry&#10;                            ?.savedStateHandle&#10;                            ?.set(&quot;selected_pets&quot;, pets)&#10;                        navController.popBackStack()&#10;                    },&#10;                    initialSelectedPets = initiallySelected&#10;                )&#10;            }&#10;&#10;            // Tier Selection&#10;            composable(&#10;                route = Screen.TierSelection.route,&#10;                enterTransition = {&#10;                    slideInVertically(&#10;                        initialOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                },&#10;                exitTransition = {&#10;                    slideOutVertically(&#10;                        targetOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                }&#10;            ) {&#10;                TierSelectionScreen(&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    onTierSelected = { tier -&gt;&#10;                        navController.previousBackStackEntry&#10;                            ?.savedStateHandle&#10;                            ?.set(&quot;selected_tier&quot;, tier)&#10;                        navController.popBackStack()&#10;                    }&#10;                )&#10;            }&#10;&#10;            // Branch Selection&#10;            composable(&#10;                route = Screen.BranchSelection.route,&#10;                enterTransition = {&#10;                    slideInVertically(&#10;                        initialOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                },&#10;                exitTransition = {&#10;                    slideOutVertically(&#10;                        targetOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                }&#10;            ) {&#10;                BranchSelectionScreen(&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    onBranchSelected = { branch -&gt;&#10;                        navController.previousBackStackEntry&#10;                            ?.savedStateHandle&#10;                            ?.set(&quot;selected_branch&quot;, branch)&#10;                        navController.popBackStack()&#10;                    }&#10;                )&#10;            }&#10;&#10;            // Payment Screen&#10;            composable(&#10;                route = Screen.Payment.route,&#10;                enterTransition = {&#10;                    slideInVertically(&#10;                        initialOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                },&#10;                exitTransition = {&#10;                    slideOutVertically(&#10;                        targetOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                }&#10;            ) { backStackEntry -&gt;&#10;                val previousEntry = navController.previousBackStackEntry&#10;                val savedStateHandle = previousEntry?.savedStateHandle&#10;&#10;                val serviceType = savedStateHandle?.get&lt;String&gt;(&quot;payment_service_type&quot;) ?: &quot;Boarding&quot;&#10;                val petNames = savedStateHandle?.get&lt;String&gt;(&quot;payment_pet_names&quot;) ?: &quot;&quot;&#10;                val startTime = savedStateHandle?.get&lt;String&gt;(&quot;payment_start_time&quot;) ?: &quot;&quot;&#10;                val startDate = savedStateHandle?.get&lt;String&gt;(&quot;payment_start_date&quot;) ?: &quot;&quot;&#10;                val endTime = savedStateHandle?.get&lt;String&gt;(&quot;payment_end_time&quot;) ?: &quot;&quot;&#10;                val endDate = savedStateHandle?.get&lt;String&gt;(&quot;payment_end_date&quot;) ?: &quot;&quot;&#10;                val tier = savedStateHandle?.get&lt;String&gt;(&quot;payment_tier&quot;) ?: &quot;&quot;&#10;                val branch = savedStateHandle?.get&lt;String&gt;(&quot;payment_branch&quot;) ?: &quot;&quot;&#10;                val duration = savedStateHandle?.get&lt;Int&gt;(&quot;payment_duration&quot;) ?: 0&#10;                val tierPrice = savedStateHandle?.get&lt;Double&gt;(&quot;payment_tier_price&quot;) ?: 0.0&#10;                val totalPrice = savedStateHandle?.get&lt;Double&gt;(&quot;payment_total_price&quot;) ?: 0.0&#10;&#10;                PaymentScreen(&#10;                    serviceType = serviceType,&#10;                    petNames = petNames,&#10;                    startTime = startTime,&#10;                    startDate = startDate,&#10;                    endTime = endTime,&#10;                    endDate = endDate,&#10;                    tier = tier,&#10;                    branch = branch,&#10;                    durationHours = duration,&#10;                    tierPrice = tierPrice,&#10;                    totalPrice = totalPrice,&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    onConfirmPayment = {&#10;                        // TODO: Implement payment confirmation logic&#10;                        navController.popBackStack(Screen.Home.route, inclusive = false)&#10;                    }&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.petpal.presentation.navigation&#10;&#10;import androidx.compose.animation.core.tween&#10;import androidx.compose.animation.slideInVertically&#10;import androidx.compose.animation.slideOutVertically&#10;import androidx.compose.foundation.layout.padding&#10;import androidx.compose.material3.Scaffold&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.ui.Modifier&#10;import androidx.navigation.NavHostController&#10;import androidx.navigation.NavType&#10;import androidx.navigation.compose.NavHost&#10;import androidx.navigation.compose.composable&#10;import androidx.navigation.compose.rememberNavController&#10;import androidx.navigation.navArgument&#10;import com.example.petpal.data.repository.AuthRepository&#10;import com.example.petpal.data.model.Pet&#10;import com.example.petpal.presentation.view.AddPetScreen&#10;import com.example.petpal.presentation.view.ChangePasswordScreen&#10;import com.example.petpal.presentation.view.AddPetScreen&#10;import com.example.petpal.presentation.view.BranchSelectionScreen&#10;import com.example.petpal.presentation.view.ChangePasswordScreen&#10;import com.example.petpal.presentation.view.EditProfileScreen&#10;import com.example.petpal.presentation.view.HistoryScreen&#10;import com.example.petpal.presentation.view.HomeScreen&#10;import com.example.petpal.presentation.view.LoginScreen&#10;import com.example.petpal.presentation.view.OnBoardingScreen&#10;import com.example.petpal.presentation.view.OrderFormScreen&#10;import com.example.petpal.presentation.view.PaymentScreen&#10;import com.example.petpal.presentation.view.PaymentMethodSelectionScreen&#10;import com.example.petpal.presentation.view.PemesananScreen&#10;import com.example.petpal.presentation.view.PetListScreen&#10;import com.example.petpal.presentation.view.PetSelectionScreen&#10;import com.example.petpal.presentation.view.ProfileScreen&#10;import com.example.petpal.presentation.view.RegisterScreen&#10;import com.example.petpal.presentation.view.TierSelectionScreen&#10;import com.example.petpal.presentation.component.PetPalBottomBar&#10;&#10;@Composable&#10;fun AppNavigation(navController: NavHostController = rememberNavController()) {&#10;    val authRepository = AuthRepository()&#10;&#10;    // Cek apakah user sudah login&#10;//    val startDestination = if (authRepository.currentUser != null) Screen.Home.route else Screen.OnBoarding.route&#10;    val startDestination = Screen.Login.route&#10;//    val startDestination = Screen.Home.route&#10;&#10;    Scaffold (&#10;        bottomBar = { PetPalBottomBar(navController) }&#10;    ){ paddingValues -&gt;&#10;        NavHost(&#10;            navController = navController,&#10;            startDestination = startDestination,&#10;            modifier = Modifier.padding(paddingValues)&#10;        ) {&#10;            // ONBOARDING&#10;            composable(Screen.OnBoarding.route) {&#10;                OnBoardingScreen(&#10;                    onNavigateToLogin = { navController.navigate(Screen.Login.route) },&#10;                    onNavigateToRegister = { navController.navigate(Screen.Register.route) }&#10;                )&#10;            }&#10;&#10;            // LOGIN&#10;            composable(Screen.Login.route) {&#10;                LoginScreen(&#10;                    onNavigateToRegister = {&#10;                        navController.navigate(Screen.Register.route){&#10;                            popUpTo(Screen.Login.route) { inclusive = true }&#10;                        }&#10;                    },&#10;                    onLoginSuccess = {&#10;                        navController.navigate(Screen.Home.route) {&#10;                            popUpTo(Screen.OnBoarding.route) { inclusive = true }&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;&#10;            // REGISTER&#10;            composable(Screen.Register.route) {&#10;                RegisterScreen(&#10;                    onNavigateToLogin = {&#10;                        navController.navigate(Screen.Login.route){&#10;                            popUpTo(Screen.Register.route) { inclusive = true }&#10;                        }&#10;                    },&#10;                    onRegisterSuccess = {&#10;                        // Langsung ke Home setelah sukses daftar&#10;                        navController.navigate(Screen.Home.route) {&#10;                            popUpTo(Screen.OnBoarding.route) { inclusive = true }&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;&#10;            // HOME&#10;            composable(Screen.Home.route) {&#10;                HomeScreen(&#10;                    onLogout = {&#10;                        authRepository.logout()&#10;                        // Kembali ke Login dan hapus history Home&#10;                        navController.navigate(Screen.Login.route) {&#10;                            popUpTo(Screen.Home.route) { inclusive = true }&#10;                            launchSingleTop = true&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;&#10;            // PESANAN&#10;            composable(Screen.Pesanan.route) {&#10;                PemesananScreen(&#10;                    onNavigateToOrderForm = { serviceType -&gt;&#10;                        navController.navigate(Screen.OrderForm.createRoute(serviceType))&#10;                    }&#10;                )&#10;            }&#10;&#10;            composable(Screen.Riwayat.route) {&#10;                HistoryScreen(&#10;                    onNavigateToHistory = { navController.navigate(Screen.Riwayat.route)},&#10;                )&#10;            }&#10;            composable(Screen.Profile.route) {&#10;                ProfileScreen(&#10;                    onNavigateToEditProfile = { navController.navigate(Screen.EditProfile.route) },&#10;                    onNavigateToPetList = { navController.navigate(Screen.PetList.route) },&#10;                    onLogout = {&#10;                        navController.navigate(Screen.Login.route) {&#10;                            popUpTo(0) { inclusive = true }&#10;                        }&#10;                    }&#10;                )&#10;            }&#10;&#10;            // Sub-Pages Profile&#10;            composable(Screen.EditProfile.route) {&#10;                EditProfileScreen(&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    onNavigateToChangePassword = { navController.navigate(Screen.ChangePassword.route) }&#10;                )&#10;            }&#10;            composable(Screen.ChangePassword.route) {&#10;                ChangePasswordScreen (&#10;                    onNavigateBack = { navController.popBackStack() }&#10;                )&#10;            }&#10;&#10;            composable(Screen.PetList.route) {&#10;                PetListScreen(&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    onNavigateToAddPet = { navController.navigate(Screen.AddPet.route) }&#10;                )&#10;            }&#10;&#10;            composable(Screen.AddPet.route) {&#10;                AddPetScreen(&#10;                    onNavigateBack = { navController.popBackStack() }&#10;                )&#10;            }&#10;&#10;            // Order Form&#10;            composable(&#10;                route = Screen.OrderForm.route,&#10;                arguments = listOf(&#10;                    navArgument(&quot;serviceType&quot;) { type = NavType.StringType }&#10;                ),&#10;                enterTransition = {&#10;                    slideInVertically(&#10;                        initialOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                },&#10;                exitTransition = {&#10;                    slideOutVertically(&#10;                        targetOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                }&#10;            ) { backStackEntry -&gt;&#10;                val serviceType = backStackEntry.arguments?.getString(&quot;serviceType&quot;) ?: &quot;Boarding&quot;&#10;                val savedStateHandle = backStackEntry.savedStateHandle&#10;                val selectedTier = savedStateHandle.getStateFlow&lt;String?&gt;(&quot;selected_tier&quot;, null).collectAsState().value&#10;                val selectedPets = savedStateHandle.get&lt;List&lt;Pet&gt;&gt;(&quot;selected_pets&quot;)&#10;                val selectedBranch = savedStateHandle.getStateFlow&lt;String?&gt;(&quot;selected_branch&quot;, null).collectAsState().value&#10;                val startTime = savedStateHandle.getStateFlow&lt;String?&gt;(&quot;start_time&quot;, null).collectAsState().value&#10;                val startDate = savedStateHandle.getStateFlow&lt;String?&gt;(&quot;start_date&quot;, null).collectAsState().value&#10;                val endTime = savedStateHandle.getStateFlow&lt;String?&gt;(&quot;end_time&quot;, null).collectAsState().value&#10;                val endDate = savedStateHandle.getStateFlow&lt;String?&gt;(&quot;end_date&quot;, null).collectAsState().value&#10;&#10;                OrderFormScreen(&#10;                    serviceType = serviceType,&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    selectedTierFromNav = selectedTier,&#10;                    selectedPetsFromNav = selectedPets,&#10;                    selectedBranchFromNav = selectedBranch,&#10;                    startTimeFromNav = startTime,&#10;                    startDateFromNav = startDate,&#10;                    endTimeFromNav = endTime,&#10;                    endDateFromNav = endDate,&#10;                    onNavigateToPetSelection = { sTime, sDate, eTime, eDate -&gt;&#10;                        navController.currentBackStackEntry?.savedStateHandle?.apply {&#10;                            set(&quot;start_time&quot;, sTime)&#10;                            set(&quot;start_date&quot;, sDate)&#10;                            set(&quot;end_time&quot;, eTime)&#10;                            set(&quot;end_date&quot;, eDate)&#10;                        }&#10;                        navController.navigate(Screen.PetSelection.route)&#10;                    },&#10;                    onNavigateToTierSelection = { sTime, sDate, eTime, eDate -&gt;&#10;                        navController.currentBackStackEntry?.savedStateHandle?.apply {&#10;                            set(&quot;start_time&quot;, sTime)&#10;                            set(&quot;start_date&quot;, sDate)&#10;                            set(&quot;end_time&quot;, eTime)&#10;                            set(&quot;end_date&quot;, eDate)&#10;                        }&#10;                        navController.navigate(Screen.TierSelection.route)&#10;                    },&#10;                    onNavigateToBranchSelection = { sTime, sDate, eTime, eDate -&gt;&#10;                        navController.currentBackStackEntry?.savedStateHandle?.apply {&#10;                            set(&quot;start_time&quot;, sTime)&#10;                            set(&quot;start_date&quot;, sDate)&#10;                            set(&quot;end_time&quot;, eTime)&#10;                            set(&quot;end_date&quot;, eDate)&#10;                        }&#10;                        navController.navigate(Screen.BranchSelection.route)&#10;                    },&#10;                    onSubmitOrder = { pets, petNames, sTime, sDate, eTime, eDate, tier, branch, notes, duration, tPrice, total -&gt;&#10;                        navController.currentBackStackEntry?.savedStateHandle?.apply {&#10;                            set(&quot;payment_service_type&quot;, serviceType)&#10;                            set(&quot;payment_pets&quot;, pets)&#10;                            set(&quot;payment_pet_names&quot;, petNames)&#10;                            set(&quot;payment_start_time&quot;, sTime)&#10;                            set(&quot;payment_start_date&quot;, sDate)&#10;                            set(&quot;payment_end_time&quot;, eTime)&#10;                            set(&quot;payment_end_date&quot;, eDate)&#10;                            set(&quot;payment_tier&quot;, tier)&#10;                            set(&quot;payment_branch&quot;, branch)&#10;                            set(&quot;payment_notes&quot;, notes)&#10;                            set(&quot;payment_duration&quot;, duration)&#10;                            set(&quot;payment_tier_price&quot;, tPrice)&#10;                            set(&quot;payment_total_price&quot;, total)&#10;                        }&#10;                        navController.navigate(Screen.Payment.route)&#10;                    }&#10;                )&#10;            }&#10;&#10;            // Pet Selection&#10;            composable(&#10;                route = Screen.PetSelection.route,&#10;                enterTransition = {&#10;                    slideInVertically(&#10;                        initialOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                },&#10;                exitTransition = {&#10;                    slideOutVertically(&#10;                        targetOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                }&#10;            ) { backStackEntry -&gt;&#10;                val previousEntry = navController.previousBackStackEntry&#10;                val initiallySelected = previousEntry?.savedStateHandle?.get&lt;List&lt;Pet&gt;&gt;(&quot;selected_pets&quot;).orEmpty()&#10;&#10;                PetSelectionScreen(&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    onNavigateToAddPet = {&#10;                        navController.navigate(Screen.AddPet.route)&#10;                    },&#10;                    onPetsSelected = { pets -&gt;&#10;                        navController.previousBackStackEntry&#10;                            ?.savedStateHandle&#10;                            ?.set(&quot;selected_pets&quot;, pets)&#10;                        navController.popBackStack()&#10;                    },&#10;                    initialSelectedPets = initiallySelected&#10;                )&#10;            }&#10;&#10;            // Tier Selection&#10;            composable(&#10;                route = Screen.TierSelection.route,&#10;                enterTransition = {&#10;                    slideInVertically(&#10;                        initialOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                },&#10;                exitTransition = {&#10;                    slideOutVertically(&#10;                        targetOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                }&#10;            ) {&#10;                TierSelectionScreen(&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    onTierSelected = { tier -&gt;&#10;                        navController.previousBackStackEntry&#10;                            ?.savedStateHandle&#10;                            ?.set(&quot;selected_tier&quot;, tier)&#10;                        navController.popBackStack()&#10;                    }&#10;                )&#10;            }&#10;&#10;            // Branch Selection&#10;            composable(&#10;                route = Screen.BranchSelection.route,&#10;                enterTransition = {&#10;                    slideInVertically(&#10;                        initialOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                },&#10;                exitTransition = {&#10;                    slideOutVertically(&#10;                        targetOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                }&#10;            ) {&#10;                BranchSelectionScreen(&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    onBranchSelected = { branch -&gt;&#10;                        navController.previousBackStackEntry&#10;                            ?.savedStateHandle&#10;                            ?.set(&quot;selected_branch&quot;, branch)&#10;                        navController.popBackStack()&#10;                    }&#10;                )&#10;            }&#10;&#10;            // Payment Screen&#10;            composable(&#10;                route = Screen.Payment.route,&#10;                enterTransition = {&#10;                    slideInVertically(&#10;                        initialOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                },&#10;                exitTransition = {&#10;                    slideOutVertically(&#10;                        targetOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                }&#10;            ) { backStackEntry -&gt;&#10;                val previousEntry = navController.previousBackStackEntry&#10;                val savedStateHandle = previousEntry?.savedStateHandle&#10;&#10;                val serviceType = savedStateHandle?.get&lt;String&gt;(&quot;payment_service_type&quot;) ?: &quot;Boarding&quot;&#10;                val pets = savedStateHandle?.get&lt;List&lt;Pet&gt;&gt;(&quot;payment_pets&quot;) ?: emptyList()&#10;                val petNames = savedStateHandle?.get&lt;String&gt;(&quot;payment_pet_names&quot;) ?: &quot;&quot;&#10;                val startTime = savedStateHandle?.get&lt;String&gt;(&quot;payment_start_time&quot;) ?: &quot;&quot;&#10;                val startDate = savedStateHandle?.get&lt;String&gt;(&quot;payment_start_date&quot;) ?: &quot;&quot;&#10;                val endTime = savedStateHandle?.get&lt;String&gt;(&quot;payment_end_time&quot;) ?: &quot;&quot;&#10;                val endDate = savedStateHandle?.get&lt;String&gt;(&quot;payment_end_date&quot;) ?: &quot;&quot;&#10;                val tier = savedStateHandle?.get&lt;String&gt;(&quot;payment_tier&quot;) ?: &quot;&quot;&#10;                val branch = savedStateHandle?.get&lt;String&gt;(&quot;payment_branch&quot;) ?: &quot;&quot;&#10;                val notes = savedStateHandle?.get&lt;String&gt;(&quot;payment_notes&quot;) ?: &quot;&quot;&#10;                val duration = savedStateHandle?.get&lt;Int&gt;(&quot;payment_duration&quot;) ?: 0&#10;                val tierPrice = savedStateHandle?.get&lt;Double&gt;(&quot;payment_tier_price&quot;) ?: 0.0&#10;                val totalPrice = savedStateHandle?.get&lt;Double&gt;(&quot;payment_total_price&quot;) ?: 0.0&#10;                val paymentMethod = backStackEntry.savedStateHandle.getStateFlow&lt;String?&gt;(&quot;selected_payment_method&quot;, null).collectAsState().value&#10;&#10;                PaymentScreen(&#10;                    serviceType = serviceType,&#10;                    petNames = petNames,&#10;                    startTime = startTime,&#10;                    startDate = startDate,&#10;                    endTime = endTime,&#10;                    endDate = endDate,&#10;                    tier = tier,&#10;                    branch = branch,&#10;                    durationHours = duration,&#10;                    tierPrice = tierPrice,&#10;                    totalPrice = totalPrice,&#10;                    selectedPaymentMethod = paymentMethod,&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    onNavigateToPaymentMethod = {&#10;                        navController.navigate(Screen.PaymentMethodSelection.route)&#10;                    },&#10;                    onConfirmPayment = { viewModel -&gt;&#10;                        // Create order with all the data&#10;                        viewModel.createOrderFromPayment(&#10;                            pets = pets,&#10;                            serviceType = serviceType,&#10;                            startTime = startTime,&#10;                            startDate = startDate,&#10;                            endTime = endTime,&#10;                            endDate = endDate,&#10;                            tier = tier,&#10;                            branch = branch,&#10;                            notes = notes,&#10;                            totalPrice = totalPrice,&#10;                            onSuccess = {&#10;                                navController.popBackStack(Screen.Home.route, inclusive = false)&#10;                            },&#10;                            onError = { error -&gt;&#10;                                // Show error (can be handled with a snackbar or toast)&#10;                                android.util.Log.e(&quot;PaymentScreen&quot;, &quot;Error creating order: $error&quot;)&#10;                            }&#10;                        )&#10;                    }&#10;                )&#10;            }&#10;&#10;            // Payment Method Selection Screen&#10;            composable(&#10;                route = Screen.PaymentMethodSelection.route,&#10;                enterTransition = {&#10;                    slideInVertically(&#10;                        initialOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                },&#10;                exitTransition = {&#10;                    slideOutVertically(&#10;                        targetOffsetY = { fullHeight -&gt; fullHeight },&#10;                        animationSpec = tween(durationMillis = 300)&#10;                    )&#10;                }&#10;            ) {&#10;                PaymentMethodSelectionScreen(&#10;                    onNavigateBack = { navController.popBackStack() },&#10;                    onPaymentMethodSelected = { method -&gt;&#10;                        navController.previousBackStackEntry&#10;                            ?.savedStateHandle&#10;                            ?.set(&quot;selected_payment_method&quot;, method.name)&#10;                        navController.popBackStack()&#10;                    }&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/petpal/presentation/navigation/Screen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/petpal/presentation/navigation/Screen.kt" />
              <option name="originalContent" value="package com.example.petpal.presentation.navigation&#10;&#10;&#10;sealed class Screen(val route: String) {&#10;    object OnBoarding : Screen(&quot;welcome_screen&quot;)&#10;    object Login : Screen(&quot;login_screen&quot;)&#10;    object Register : Screen(&quot;register_screen&quot;)&#10;&#10;    // Bottom Nav Screens&#10;    object Home : Screen(&quot;home&quot;)&#10;    object Pesanan : Screen(&quot;pesanan&quot;)&#10;    object Riwayat : Screen(&quot;riwayat&quot;)&#10;    object Profile : Screen(&quot;profile&quot;)&#10;&#10;    // Sub-Screens&#10;    object EditProfile : Screen(&quot;edit_profile&quot;)&#10;    object ChangePassword : Screen(&quot;change_password&quot;)&#10;&#10;    object PetList : Screen(&quot;pet_list&quot;)&#10;    object AddPet : Screen(&quot;add_pet&quot;)&#10;&#10;    // Order Screens&#10;    object OrderForm : Screen(&quot;order_form/{serviceType}&quot;) {&#10;        fun createRoute(serviceType: String) = &quot;order_form/$serviceType&quot;&#10;    }&#10;    object PetSelection : Screen(&quot;pet_selection&quot;)&#10;    object TierSelection : Screen(&quot;tier_selection&quot;)&#10;    object BranchSelection : Screen(&quot;branch_selection&quot;)&#10;    object Payment : Screen(&quot;payment&quot;)&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.petpal.presentation.navigation&#10;&#10;&#10;sealed class Screen(val route: String) {&#10;    object OnBoarding : Screen(&quot;welcome_screen&quot;)&#10;    object Login : Screen(&quot;login_screen&quot;)&#10;    object Register : Screen(&quot;register_screen&quot;)&#10;&#10;    // Bottom Nav Screens&#10;    object Home : Screen(&quot;home&quot;)&#10;    object Pesanan : Screen(&quot;pesanan&quot;)&#10;    object Riwayat : Screen(&quot;riwayat&quot;)&#10;    object Profile : Screen(&quot;profile&quot;)&#10;&#10;    // Sub-Screens&#10;    object EditProfile : Screen(&quot;edit_profile&quot;)&#10;    object ChangePassword : Screen(&quot;change_password&quot;)&#10;&#10;    object PetList : Screen(&quot;pet_list&quot;)&#10;    object AddPet : Screen(&quot;add_pet&quot;)&#10;&#10;    // Order Screens&#10;    object OrderForm : Screen(&quot;order_form/{serviceType}&quot;) {&#10;        fun createRoute(serviceType: String) = &quot;order_form/$serviceType&quot;&#10;    }&#10;    object PetSelection : Screen(&quot;pet_selection&quot;)&#10;    object TierSelection : Screen(&quot;tier_selection&quot;)&#10;    object BranchSelection : Screen(&quot;branch_selection&quot;)&#10;    object Payment : Screen(&quot;payment&quot;)&#10;    object PaymentMethodSelection : Screen(&quot;payment_method_selection&quot;)&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/petpal/presentation/view/OrderFormScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/petpal/presentation/view/OrderFormScreen.kt" />
              <option name="originalContent" value="package com.example.petpal.presentation.view&#10;&#10;import androidx.compose.animation.core.animateFloatAsState&#10;import androidx.compose.animation.core.tween&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material3.DatePicker&#10;import androidx.compose.material3.DatePickerDialog&#10;import androidx.compose.material3.ExperimentalMaterial3Api&#10;import androidx.compose.material3.HorizontalDivider&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.material3.TimePicker&#10;import androidx.compose.material3.rememberDatePickerState&#10;import androidx.compose.material3.rememberTimePickerState&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.OutlinedTextFieldDefaults&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.rotate&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import android.widget.Toast&#10;import com.example.petpal.R&#10;import com.example.petpal.data.model.Pet&#10;import com.example.petpal.presentation.component.OrderFormField&#10;import com.example.petpal.presentation.theme.BlackText&#10;import com.example.petpal.presentation.theme.GrayText&#10;import com.example.petpal.presentation.theme.PetPalDarkGreen&#10;import com.example.petpal.presentation.theme.White&#10;import java.text.NumberFormat&#10;import java.text.SimpleDateFormat&#10;import java.util.Calendar&#10;import java.util.Locale&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun OrderFormScreen(&#10;    serviceType: String,&#10;    onNavigateBack: () -&gt; Unit,&#10;    selectedTierFromNav: String? = null,&#10;    selectedPetsFromNav: List&lt;Pet&gt;? = null,&#10;    selectedBranchFromNav: String? = null,&#10;    startTimeFromNav: String? = null,&#10;    startDateFromNav: String? = null,&#10;    endTimeFromNav: String? = null,&#10;    endDateFromNav: String? = null,&#10;    onNavigateToPetSelection: (String, String, String, String) -&gt; Unit = { _, _, _, _ -&gt; },&#10;    onNavigateToTierSelection: (String, String, String, String) -&gt; Unit = { _, _, _, _ -&gt; },&#10;    onNavigateToBranchSelection: (String, String, String, String) -&gt; Unit = { _, _, _, _ -&gt; },&#10;    onSubmitOrder: (List&lt;Pet&gt;, String, String, String, String, String, String, String, String, Int, Double, Double) -&gt; Unit = { _, _, _, _, _, _, _, _, _, _, _, _ -&gt; }&#10;) {&#10;    val context = LocalContext.current&#10;&#10;    // Get current date for Daycare service&#10;    val currentCalendar = Calendar.getInstance()&#10;    val currentDateString = SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault()).format(currentCalendar.time)&#10;&#10;    // Form state&#10;    var selectedPets by remember { mutableStateOf&lt;List&lt;Pet&gt;&gt;(selectedPetsFromNav ?: emptyList()) }&#10;    var selectedPetNames by remember {&#10;        mutableStateOf&lt;String?&gt;(&#10;            selectedPetsFromNav?.joinToString { pet: Pet -&gt; pet.name }&#10;        )&#10;    }&#10;    var startTime by remember { mutableStateOf(startTimeFromNav ?: &quot;00:00&quot;) }&#10;    var startDate by remember { mutableStateOf(startDateFromNav ?: if (serviceType == &quot;Daycare&quot;) currentDateString else &quot;00/00/0000&quot;) }&#10;    var endTime by remember { mutableStateOf(endTimeFromNav ?: &quot;00:00&quot;) }&#10;    var endDate by remember { mutableStateOf(endDateFromNav ?: if (serviceType == &quot;Daycare&quot;) currentDateString else &quot;00/00/0000&quot;) }&#10;    var selectedTier by remember { mutableStateOf&lt;String?&gt;(selectedTierFromNav) }&#10;    var selectedBranch by remember { mutableStateOf&lt;String?&gt;(selectedBranchFromNav) }&#10;    var note by remember { mutableStateOf(&quot;&quot;) }&#10;    var isPriceExpanded by remember { mutableStateOf(false) }&#10;&#10;    // Update selectedPets when selectedPetsFromNav changes&#10;    LaunchedEffect(selectedPetsFromNav) {&#10;        selectedPetsFromNav?.let {&#10;            selectedPets = it&#10;            selectedPetNames = it.joinToString { pet -&gt; pet.name }&#10;        }&#10;    }&#10;&#10;    // Dialog states&#10;    var showStartDatePicker by remember { mutableStateOf(false) }&#10;    var showStartTimePicker by remember { mutableStateOf(false) }&#10;    var showEndDatePicker by remember { mutableStateOf(false) }&#10;    var showEndTimePicker by remember { mutableStateOf(false) }&#10;&#10;    // Calculate total price&#10;    val tierPrices = mapOf(&#10;        &quot;Regular&quot; to 50000.0,&#10;        &quot;VIP&quot; to 75000.0,&#10;        &quot;VVIP&quot; to 100000.0&#10;    )&#10;&#10;    // Calculate duration from start and end times/dates&#10;    val durationHours = remember(startTime, startDate, endTime, endDate) {&#10;        try {&#10;            if (serviceType == &quot;Boarding&quot;) {&#10;                // For Boarding: Calculate days between dates&#10;                if (startDate != &quot;00/00/0000&quot; &amp;&amp; endDate != &quot;00/00/0000&quot;) {&#10;                    val dateFormat = SimpleDateFormat(&quot;dd/MM/yyyy HH:mm&quot;, Locale.getDefault())&#10;                    val startDateTime = dateFormat.parse(&quot;$startDate $startTime&quot;)&#10;                    val endDateTime = dateFormat.parse(&quot;$endDate $endTime&quot;)&#10;&#10;                    if (startDateTime != null &amp;&amp; endDateTime != null) {&#10;                        val diffInMillis = endDateTime.time - startDateTime.time&#10;                        val diffInHours = diffInMillis / (1000 * 60 * 60)&#10;                        maxOf(diffInHours.toInt(), 0)&#10;                    } else 0&#10;                } else 0&#10;            } else {&#10;                // For Daycare: Calculate hours between times on the same day&#10;                if (startTime != &quot;00:00&quot; &amp;&amp; endTime != &quot;00:00&quot;) {&#10;                    val timeFormat = SimpleDateFormat(&quot;HH:mm&quot;, Locale.getDefault())&#10;                    val startTimeParsed = timeFormat.parse(startTime)&#10;                    val endTimeParsed = timeFormat.parse(endTime)&#10;&#10;                    if (startTimeParsed != null &amp;&amp; endTimeParsed != null) {&#10;                        val diffInMillis = endTimeParsed.time - startTimeParsed.time&#10;                        val diffInHours = diffInMillis / (1000 * 60 * 60)&#10;                        maxOf(diffInHours.toInt(), 0)&#10;                    } else 0&#10;                } else 0&#10;            }&#10;        } catch (e: Exception) {&#10;            0&#10;        }&#10;    }&#10;&#10;    val tierPrice = selectedTier?.let { tierPrices[it] } ?: 0.0&#10;    val totalPrice = durationHours * tierPrice&#10;&#10;    // Check if form is complete&#10;    val isFormComplete = selectedPetNames != null &amp;&amp;&#10;                         selectedTier != null &amp;&amp;&#10;                         selectedBranch != null &amp;&amp;&#10;                         (if (serviceType == &quot;Boarding&quot;) {&#10;                             startDate != &quot;00/00/0000&quot; &amp;&amp; endDate != &quot;00/00/0000&quot;&#10;                         } else {&#10;                             (startTime != &quot;00:00&quot; || endTime != &quot;00:00&quot;) &amp;&amp; startDate != &quot;00/00/0000&quot;&#10;                         })&#10;&#10;    val scrollState = rememberScrollState()&#10;    val iconRotation by animateFloatAsState(&#10;        targetValue = if (isPriceExpanded) 0f else 180f,&#10;        animationSpec = tween(durationMillis = 300),&#10;        label = &quot;icon rotation&quot;&#10;    )&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(White)&#10;            .windowInsetsPadding(WindowInsets.systemBars)&#10;    ) {&#10;        // Header&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(top = 8.dp, bottom = 8.dp)&#10;        ) {&#10;            IconButton(&#10;                onClick = onNavigateBack,&#10;                modifier = Modifier.align(Alignment.CenterStart)&#10;            ) {&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.icon_arrowleft_foreground),&#10;                    contentDescription = &quot;Back&quot;,&#10;                    modifier = Modifier.size(24.dp)&#10;                )&#10;            }&#10;&#10;            Text(&#10;                text = &quot;Buat Pesanan&quot;,&#10;                fontSize = 20.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = BlackText,&#10;                modifier = Modifier.align(Alignment.Center)&#10;            )&#10;        }&#10;&#10;        // Scrollable content&#10;        Column(&#10;            modifier = Modifier&#10;                .weight(1f)&#10;                .verticalScroll(scrollState)&#10;                .padding(horizontal = 24.dp)&#10;        ) {&#10;            // Pet Selection&#10;            OrderFormField(&#10;                iconRes = R.drawable.icon_petoption_foreground,&#10;                label = &quot;Hewan Peliharaan&quot;,&#10;                value = selectedPetNames ?: &quot;Pilih hewan peliharaanmu&quot;,&#10;                onClick = { onNavigateToPetSelection(startTime, startDate, endTime, endDate) },&#10;                isPlaceholder = selectedPetNames == null,&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Duration Section&#10;            Text(&#10;                text = &quot;Durasi&quot;,&#10;                fontSize = 16.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = BlackText,&#10;                modifier = Modifier.padding(bottom = 8.dp)&#10;            )&#10;&#10;            // Start Duration&#10;            DurationField(&#10;                label = &quot;Dari :&quot;,&#10;                time = startTime,&#10;                date = startDate,&#10;                onClick = {&#10;                    if (serviceType == &quot;Boarding&quot;) {&#10;                        showStartDatePicker = true&#10;                    } else {&#10;                        showStartTimePicker = true&#10;                    }&#10;                },&#10;                modifier = Modifier.padding(bottom = 12.dp)&#10;            )&#10;&#10;            // End Duration&#10;            DurationField(&#10;                label = &quot;Sampai :&quot;,&#10;                time = endTime,&#10;                date = endDate,&#10;                onClick = {&#10;                    if (serviceType == &quot;Boarding&quot;) {&#10;                        showEndDatePicker = true&#10;                    } else {&#10;                        showEndTimePicker = true&#10;                    }&#10;                },&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Service Tier&#10;            OrderFormField(&#10;                iconRes = R.drawable.icon_tier_foreground,&#10;                label = &quot;Tingkat Layanan&quot;,&#10;                value = selectedTier ?: &quot;Tingkat Layanan&quot;,&#10;                onClick = { onNavigateToTierSelection(startTime, startDate, endTime, endDate) },&#10;                isPlaceholder = selectedTier == null,&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Branch&#10;            OrderFormField(&#10;                iconRes = R.drawable.icon_branch_foreground,&#10;                label = &quot;Cabang&quot;,&#10;                value = selectedBranch ?: &quot;Cabang&quot;,&#10;                onClick = { onNavigateToBranchSelection(startTime, startDate, endTime, endDate) },&#10;                isPlaceholder = selectedBranch == null,&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Notes&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(bottom = 24.dp)&#10;            ) {&#10;                Text(&#10;                    text = &quot;Catatan&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = BlackText,&#10;                    modifier = Modifier.padding(bottom = 8.dp)&#10;                )&#10;&#10;                OutlinedTextField(&#10;                    value = note,&#10;                    onValueChange = { note = it },&#10;                    placeholder = {&#10;                        Row(&#10;                            verticalAlignment = Alignment.CenterVertically,&#10;                            horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;                        ) {&#10;                            Image(&#10;                                painter = painterResource(id = R.drawable.icon_note_foreground),&#10;                                contentDescription = &quot;Note icon&quot;,&#10;                                modifier = Modifier.size(16.dp)&#10;                            )&#10;                            Text(&#10;                                text = &quot;Ketik catatanmu di sini&quot;,&#10;                                color = GrayText,&#10;                                fontSize = 14.sp&#10;                            )&#10;                        }&#10;                    },&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(100.dp),&#10;                    shape = RoundedCornerShape(12.dp),&#10;                    colors = OutlinedTextFieldDefaults.colors(&#10;                        unfocusedBorderColor = GrayText.copy(alpha = 0.3f),&#10;                        focusedBorderColor = PetPalDarkGreen,&#10;                        unfocusedContainerColor = GrayText.copy(alpha = 0.1f),&#10;                        focusedContainerColor = GrayText.copy(alpha = 0.1f),&#10;                        unfocusedTextColor = BlackText,&#10;                        focusedTextColor = BlackText&#10;                    )&#10;                )&#10;            }&#10;        }&#10;&#10;        // Date/Time Pickers&#10;        if (showStartDatePicker) {&#10;            DateTimePickerDialog(&#10;                onDismiss = { showStartDatePicker = false },&#10;                onDateTimeSelected = { time, date -&gt;&#10;                    startTime = time&#10;                    startDate = date&#10;                    showStartDatePicker = false&#10;                },&#10;                isStart = true,&#10;                currentStartTime = startTime,&#10;                currentStartDate = startDate,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        if (showStartTimePicker) {&#10;            TimePickerDialog(&#10;                onDismiss = { showStartTimePicker = false },&#10;                onTimeSelected = { time -&gt;&#10;                    startTime = time&#10;                    showStartTimePicker = false&#10;                },&#10;                isStart = true,&#10;                currentStartTime = startTime,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        if (showEndDatePicker) {&#10;            DateTimePickerDialog(&#10;                onDismiss = { showEndDatePicker = false },&#10;                onDateTimeSelected = { time, date -&gt;&#10;                    endTime = time&#10;                    endDate = date&#10;                    showEndDatePicker = false&#10;                },&#10;                isStart = false,&#10;                currentStartTime = startTime,&#10;                currentStartDate = startDate,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        if (showEndTimePicker) {&#10;            TimePickerDialog(&#10;                onDismiss = { showEndTimePicker = false },&#10;                onTimeSelected = { time -&gt;&#10;                    endTime = time&#10;                    showEndTimePicker = false&#10;                },&#10;                isStart = false,&#10;                currentStartTime = startTime,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        // Price Section - Sticky above button&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .background(White)&#10;                .padding(horizontal = 24.dp)&#10;        ) {&#10;            // Total Price Header (Clickable)&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .clickable { isPriceExpanded = !isPriceExpanded }&#10;                    .padding(vertical = 8.dp),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Text(&#10;                    text = &quot;Total Harga : Rp ${formatPrice(totalPrice)}&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = BlackText,&#10;                    modifier = Modifier.weight(1f)&#10;                )&#10;&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.icon_pricedetail_foreground),&#10;                    contentDescription = &quot;Price detail&quot;,&#10;                    modifier = Modifier&#10;                        .size(20.dp)&#10;                        .rotate(iconRotation)&#10;                )&#10;            }&#10;&#10;            // Expanded Price Details&#10;            if (isPriceExpanded) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(top = 12.dp)&#10;                ) {&#10;                    HorizontalDivider(&#10;                        color = GrayText.copy(alpha = 0.3f),&#10;                        modifier = Modifier.padding(bottom = 12.dp)&#10;                    )&#10;&#10;                    PriceDetailRow(&#10;                        label = &quot;Durasi&quot;,&#10;                        value = &quot;$durationHours jam&quot;&#10;                    )&#10;&#10;                    PriceDetailRow(&#10;                        label = &quot;Harga per jam&quot;,&#10;                        value = &quot;Rp ${formatPrice(tierPrice)}&quot;&#10;                    )&#10;&#10;                    HorizontalDivider(&#10;                        color = GrayText.copy(alpha = 0.3f),&#10;                        modifier = Modifier.padding(vertical = 12.dp)&#10;                    )&#10;&#10;                    PriceDetailRow(&#10;                        label = &quot;Total&quot;,&#10;                        value = &quot;Rp ${formatPrice(totalPrice)}&quot;,&#10;                        isBold = true&#10;                    )&#10;                }&#10;            }&#10;        }&#10;&#10;        // Bottom Button&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .background(White)&#10;                .padding(horizontal = 24.dp)&#10;                .padding(bottom = 24.dp, top = 8.dp)&#10;        ) {&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .background(&#10;                        color = if (isFormComplete) PetPalDarkGreen else GrayText.copy(alpha = 0.5f),&#10;                        shape = RoundedCornerShape(32.dp)&#10;                    )&#10;                    .clickable(enabled = isFormComplete) {&#10;                        if (isFormComplete) {&#10;                            onSubmitOrder(&#10;                                selectedPetNames ?: &quot;&quot;,&#10;                                startTime,&#10;                                startDate,&#10;                                endTime,&#10;                                endDate,&#10;                                selectedTier ?: &quot;&quot;,&#10;                                selectedBranch ?: &quot;&quot;,&#10;                                note,&#10;                                durationHours,&#10;                                tierPrice,&#10;                                totalPrice&#10;                            )&#10;                        }&#10;                    }&#10;                    .padding(16.dp),&#10;                horizontalArrangement = Arrangement.Center,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.icon_arrowright),&#10;                    contentDescription = null,&#10;                    modifier = Modifier.size(20.dp)&#10;                )&#10;&#10;                Spacer(modifier = Modifier.width(8.dp))&#10;&#10;                Text(&#10;                    text = &quot;Lakukan Pembayaran&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = White&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun DurationField(&#10;    label: String,&#10;    time: String,&#10;    date: String,&#10;    onClick: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Row(&#10;        modifier = modifier&#10;            .fillMaxWidth()&#10;            .clickable(onClick = onClick)&#10;            .background(&#10;                color = GrayText.copy(alpha = 0.1f),&#10;                shape = RoundedCornerShape(12.dp)&#10;            )&#10;            .padding(16.dp),&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        Image(&#10;            painter = painterResource(id = R.drawable.icon_calendar_foreground),&#10;            contentDescription = &quot;Calendar&quot;,&#10;            modifier = Modifier.size(20.dp)&#10;        )&#10;&#10;        Spacer(modifier = Modifier.width(12.dp))&#10;&#10;        Text(&#10;            text = label,&#10;            fontSize = 14.sp,&#10;            color = BlackText,&#10;            fontWeight = FontWeight.Medium&#10;        )&#10;&#10;        Spacer(modifier = Modifier.width(8.dp))&#10;&#10;        Text(&#10;            text = &quot;$time, $date&quot;,&#10;            fontSize = 14.sp,&#10;            color = if (time == &quot;00:00&quot; &amp;&amp; date == &quot;00/00/0000&quot;) GrayText else BlackText&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun PriceDetailRow(&#10;    label: String,&#10;    value: String,&#10;    isBold: Boolean = false&#10;) {&#10;    Row(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(vertical = 4.dp),&#10;        horizontalArrangement = Arrangement.SpaceBetween&#10;    ) {&#10;        Text(&#10;            text = label,&#10;            fontSize = 14.sp,&#10;            fontWeight = if (isBold) FontWeight.Bold else FontWeight.Normal,&#10;            color = BlackText&#10;        )&#10;&#10;        Text(&#10;            text = value,&#10;            fontSize = 14.sp,&#10;            fontWeight = if (isBold) FontWeight.Bold else FontWeight.Normal,&#10;            color = BlackText&#10;        )&#10;    }&#10;}&#10;&#10;private fun formatPrice(price: Double): String {&#10;    val formatter = NumberFormat.getInstance(Locale.forLanguageTag(&quot;id-ID&quot;))&#10;    return formatter.format(price.toLong())&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;private fun DateTimePickerDialog(&#10;    onDismiss: () -&gt; Unit,&#10;    onDateTimeSelected: (String, String) -&gt; Unit,&#10;    isStart: Boolean,&#10;    @Suppress(&quot;UNUSED_PARAMETER&quot;) currentStartTime: String,&#10;    currentStartDate: String,&#10;    context: android.content.Context&#10;) {&#10;    val calendar = Calendar.getInstance()&#10;&#10;    // Parse current start date/time if available for end date validation&#10;    if (!isStart &amp;&amp; currentStartDate != &quot;00/00/0000&quot;) {&#10;        try {&#10;            val parts = currentStartDate.split(&quot;/&quot;)&#10;            if (parts.size == 3) {&#10;                calendar.set(parts[2].toInt(), parts[1].toInt() - 1, parts[0].toInt())&#10;            }&#10;        } catch (_: Exception) {&#10;            // Keep current date&#10;        }&#10;    }&#10;&#10;    val now = Calendar.getInstance()&#10;    val todayStart = Calendar.getInstance().apply {&#10;        set(Calendar.HOUR_OF_DAY, 0)&#10;        set(Calendar.MINUTE, 0)&#10;        set(Calendar.SECOND, 0)&#10;        set(Calendar.MILLISECOND, 0)&#10;    }&#10;&#10;    val minDate = if (isStart) {&#10;        // For start date, allow today (but will validate time later)&#10;        todayStart.timeInMillis&#10;    } else {&#10;        // For end date, minimum is start date&#10;        calendar.timeInMillis&#10;    }&#10;&#10;    val datePickerState = rememberDatePickerState(&#10;        initialSelectedDateMillis = Calendar.getInstance().timeInMillis&#10;    )&#10;&#10;    var showTimePicker by remember { mutableStateOf(false) }&#10;&#10;    if (!showTimePicker) {&#10;        DatePickerDialog(&#10;            onDismissRequest = onDismiss,&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = {&#10;                        datePickerState.selectedDateMillis?.let { millis -&gt;&#10;                            // Validate date is not before minimum&#10;                            if (millis &gt;= minDate) {&#10;                                showTimePicker = true&#10;                            } else {&#10;                                Toast.makeText(&#10;                                    context,&#10;                                    &quot;Tidak dapat memilih tanggal yang sudah lewat&quot;,&#10;                                    Toast.LENGTH_SHORT&#10;                                ).show()&#10;                            }&#10;                        }&#10;                    }&#10;                ) {&#10;                    Text(&quot;Pilih Waktu&quot;)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = onDismiss) {&#10;                    Text(&quot;Batal&quot;)&#10;                }&#10;            }&#10;        ) {&#10;            DatePicker(state = datePickerState)&#10;        }&#10;    } else {&#10;        val timePickerState = rememberTimePickerState(&#10;            initialHour = 0,&#10;            initialMinute = 0,&#10;            is24Hour = true&#10;        )&#10;&#10;        androidx.compose.material3.AlertDialog(&#10;            onDismissRequest = onDismiss,&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = {&#10;                        datePickerState.selectedDateMillis?.let { millis -&gt;&#10;                            val selectedCalendar = Calendar.getInstance().apply {&#10;                                timeInMillis = millis&#10;                            }&#10;&#10;                            val dateString = SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault())&#10;                                .format(selectedCalendar.time)&#10;                            val timeString = String.format(Locale.getDefault(), &quot;%02d:%02d&quot;, timePickerState.hour, timePickerState.minute)&#10;&#10;                            // Validate time if same day&#10;                            val isSameDay = selectedCalendar.get(Calendar.YEAR) == now.get(Calendar.YEAR) &amp;&amp;&#10;                                    selectedCalendar.get(Calendar.DAY_OF_YEAR) == now.get(Calendar.DAY_OF_YEAR)&#10;&#10;                            if (isSameDay) {&#10;                                val selectedHour = timePickerState.hour&#10;                                val selectedMinute = timePickerState.minute&#10;                                val currentHour = now.get(Calendar.HOUR_OF_DAY)&#10;                                val currentMinute = now.get(Calendar.MINUTE)&#10;&#10;                                if (selectedHour &gt; currentHour || (selectedHour == currentHour &amp;&amp; selectedMinute &gt;= currentMinute)) {&#10;                                    onDateTimeSelected(timeString, dateString)&#10;                                } else {&#10;                                    Toast.makeText(&#10;                                        context,&#10;                                        &quot;Tidak dapat memilih waktu yang sudah lewat&quot;,&#10;                                        Toast.LENGTH_SHORT&#10;                                    ).show()&#10;                                }&#10;                            } else {&#10;                                onDateTimeSelected(timeString, dateString)&#10;                            }&#10;                        }&#10;                    }&#10;                ) {&#10;                    Text(&quot;OK&quot;)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = onDismiss) {&#10;                    Text(&quot;Batal&quot;)&#10;                }&#10;            },&#10;            text = {&#10;                Column(&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    modifier = Modifier.fillMaxWidth()&#10;                ) {&#10;                    TimePicker(state = timePickerState)&#10;                }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;private fun TimePickerDialog(&#10;    onDismiss: () -&gt; Unit,&#10;    onTimeSelected: (String) -&gt; Unit,&#10;    isStart: Boolean,&#10;    currentStartTime: String,&#10;    context: android.content.Context&#10;) {&#10;    val now = Calendar.getInstance()&#10;    val currentHour = now.get(Calendar.HOUR_OF_DAY)&#10;    val currentMinute = now.get(Calendar.MINUTE)&#10;&#10;    // Parse start time for end time validation&#10;    var startHour = currentHour&#10;    var startMinute = currentMinute&#10;    if (!isStart &amp;&amp; currentStartTime != &quot;00:00&quot;) {&#10;        try {&#10;            val parts = currentStartTime.split(&quot;:&quot;)&#10;            if (parts.size == 2) {&#10;                startHour = parts[0].toInt()&#10;                startMinute = parts[1].toInt()&#10;            }&#10;        } catch (_: Exception) {&#10;            // Use current time&#10;        }&#10;    }&#10;&#10;    val minHour = if (isStart) currentHour else startHour&#10;    val minMinute = if (isStart) currentMinute else startMinute&#10;&#10;    val timePickerState = rememberTimePickerState(&#10;        initialHour = minHour,&#10;        initialMinute = minMinute,&#10;        is24Hour = true&#10;    )&#10;&#10;    androidx.compose.material3.AlertDialog(&#10;        onDismissRequest = onDismiss,&#10;        confirmButton = {&#10;            TextButton(&#10;                onClick = {&#10;                    val selectedHour = timePickerState.hour&#10;                    val selectedMinute = timePickerState.minute&#10;&#10;                    // Validate time&#10;                    val isValid = if (isStart) {&#10;                        selectedHour &gt; minHour || (selectedHour == minHour &amp;&amp; selectedMinute &gt;= minMinute)&#10;                    } else {&#10;                        selectedHour &gt; minHour || (selectedHour == minHour &amp;&amp; selectedMinute &gt; minMinute)&#10;                    }&#10;&#10;                    if (isValid) {&#10;                        val timeString = String.format(Locale.getDefault(), &quot;%02d:%02d&quot;, selectedHour, selectedMinute)&#10;                        onTimeSelected(timeString)&#10;                    } else {&#10;                        val message = if (isStart) {&#10;                            &quot;Tidak dapat memilih waktu yang sudah lewat&quot;&#10;                        } else {&#10;                            &quot;Waktu akhir harus lebih dari waktu mulai&quot;&#10;                        }&#10;                        Toast.makeText(context, message, Toast.LENGTH_SHORT).show()&#10;                    }&#10;                }&#10;            ) {&#10;                Text(&quot;OK&quot;)&#10;            }&#10;        },&#10;        dismissButton = {&#10;            TextButton(onClick = onDismiss) {&#10;                Text(&quot;Batal&quot;)&#10;            }&#10;        },&#10;        text = {&#10;            Column(&#10;                horizontalAlignment = Alignment.CenterHorizontally,&#10;                modifier = Modifier.fillMaxWidth()&#10;            ) {&#10;                TimePicker(state = timePickerState)&#10;            }&#10;        }&#10;    )&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.petpal.presentation.view&#10;&#10;import androidx.compose.animation.core.animateFloatAsState&#10;import androidx.compose.animation.core.tween&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material3.DatePicker&#10;import androidx.compose.material3.DatePickerDialog&#10;import androidx.compose.material3.ExperimentalMaterial3Api&#10;import androidx.compose.material3.HorizontalDivider&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.material3.TimePicker&#10;import androidx.compose.material3.rememberDatePickerState&#10;import androidx.compose.material3.rememberTimePickerState&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.OutlinedTextFieldDefaults&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.rotate&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import android.widget.Toast&#10;import com.example.petpal.R&#10;import com.example.petpal.data.model.Pet&#10;import com.example.petpal.presentation.component.OrderFormField&#10;import com.example.petpal.presentation.theme.BlackText&#10;import com.example.petpal.presentation.theme.GrayText&#10;import com.example.petpal.presentation.theme.PetPalDarkGreen&#10;import com.example.petpal.presentation.theme.White&#10;import java.text.NumberFormat&#10;import java.text.SimpleDateFormat&#10;import java.util.Calendar&#10;import java.util.Locale&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun OrderFormScreen(&#10;    serviceType: String,&#10;    onNavigateBack: () -&gt; Unit,&#10;    selectedTierFromNav: String? = null,&#10;    selectedPetsFromNav: List&lt;Pet&gt;? = null,&#10;    selectedBranchFromNav: String? = null,&#10;    startTimeFromNav: String? = null,&#10;    startDateFromNav: String? = null,&#10;    endTimeFromNav: String? = null,&#10;    endDateFromNav: String? = null,&#10;    onNavigateToPetSelection: (String, String, String, String) -&gt; Unit = { _, _, _, _ -&gt; },&#10;    onNavigateToTierSelection: (String, String, String, String) -&gt; Unit = { _, _, _, _ -&gt; },&#10;    onNavigateToBranchSelection: (String, String, String, String) -&gt; Unit = { _, _, _, _ -&gt; },&#10;    onSubmitOrder: (List&lt;Pet&gt;, String, String, String, String, String, String, String, String, Int, Double, Double) -&gt; Unit = { _, _, _, _, _, _, _, _, _, _, _, _ -&gt; }&#10;) {&#10;    val context = LocalContext.current&#10;&#10;    // Get current date for Daycare service&#10;    val currentCalendar = Calendar.getInstance()&#10;    val currentDateString = SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault()).format(currentCalendar.time)&#10;&#10;    // Form state&#10;    var selectedPets by remember { mutableStateOf&lt;List&lt;Pet&gt;&gt;(selectedPetsFromNav ?: emptyList()) }&#10;    var selectedPetNames by remember {&#10;        mutableStateOf&lt;String?&gt;(&#10;            selectedPetsFromNav?.joinToString { pet: Pet -&gt; pet.name }&#10;        )&#10;    }&#10;    var startTime by remember { mutableStateOf(startTimeFromNav ?: &quot;00:00&quot;) }&#10;    var startDate by remember { mutableStateOf(startDateFromNav ?: if (serviceType == &quot;Daycare&quot;) currentDateString else &quot;00/00/0000&quot;) }&#10;    var endTime by remember { mutableStateOf(endTimeFromNav ?: &quot;00:00&quot;) }&#10;    var endDate by remember { mutableStateOf(endDateFromNav ?: if (serviceType == &quot;Daycare&quot;) currentDateString else &quot;00/00/0000&quot;) }&#10;    var selectedTier by remember { mutableStateOf&lt;String?&gt;(selectedTierFromNav) }&#10;    var selectedBranch by remember { mutableStateOf&lt;String?&gt;(selectedBranchFromNav) }&#10;    var note by remember { mutableStateOf(&quot;&quot;) }&#10;    var isPriceExpanded by remember { mutableStateOf(false) }&#10;&#10;    // Update selectedPets when selectedPetsFromNav changes&#10;    LaunchedEffect(selectedPetsFromNav) {&#10;        selectedPetsFromNav?.let {&#10;            selectedPets = it&#10;            selectedPetNames = it.joinToString { pet -&gt; pet.name }&#10;        }&#10;    }&#10;&#10;    // Update selectedPets when selectedPetsFromNav changes&#10;    LaunchedEffect(selectedPetsFromNav) {&#10;        selectedPetsFromNav?.let {&#10;            selectedPets = it&#10;            selectedPetNames = it.joinToString { pet -&gt; pet.name }&#10;        }&#10;    }&#10;&#10;    // Dialog states&#10;    var showStartDatePicker by remember { mutableStateOf(false) }&#10;    var showStartTimePicker by remember { mutableStateOf(false) }&#10;    var showEndDatePicker by remember { mutableStateOf(false) }&#10;    var showEndTimePicker by remember { mutableStateOf(false) }&#10;&#10;    // Calculate total price&#10;    val tierPrices = mapOf(&#10;        &quot;Regular&quot; to 50000.0,&#10;        &quot;VIP&quot; to 75000.0,&#10;        &quot;VVIP&quot; to 100000.0&#10;    )&#10;&#10;    // Calculate duration from start and end times/dates&#10;    val durationHours = remember(startTime, startDate, endTime, endDate) {&#10;        try {&#10;            if (serviceType == &quot;Boarding&quot;) {&#10;                // For Boarding: Calculate days between dates&#10;                if (startDate != &quot;00/00/0000&quot; &amp;&amp; endDate != &quot;00/00/0000&quot;) {&#10;                    val dateFormat = SimpleDateFormat(&quot;dd/MM/yyyy HH:mm&quot;, Locale.getDefault())&#10;                    val startDateTime = dateFormat.parse(&quot;$startDate $startTime&quot;)&#10;                    val endDateTime = dateFormat.parse(&quot;$endDate $endTime&quot;)&#10;&#10;                    if (startDateTime != null &amp;&amp; endDateTime != null) {&#10;                        val diffInMillis = endDateTime.time - startDateTime.time&#10;                        val diffInHours = diffInMillis / (1000 * 60 * 60)&#10;                        maxOf(diffInHours.toInt(), 0)&#10;                    } else 0&#10;                } else 0&#10;            } else {&#10;                // For Daycare: Calculate hours between times on the same day&#10;                if (startTime != &quot;00:00&quot; &amp;&amp; endTime != &quot;00:00&quot;) {&#10;                    val timeFormat = SimpleDateFormat(&quot;HH:mm&quot;, Locale.getDefault())&#10;                    val startTimeParsed = timeFormat.parse(startTime)&#10;                    val endTimeParsed = timeFormat.parse(endTime)&#10;&#10;                    if (startTimeParsed != null &amp;&amp; endTimeParsed != null) {&#10;                        val diffInMillis = endTimeParsed.time - startTimeParsed.time&#10;                        val diffInHours = diffInMillis / (1000 * 60 * 60)&#10;                        maxOf(diffInHours.toInt(), 0)&#10;                    } else 0&#10;                } else 0&#10;            }&#10;        } catch (e: Exception) {&#10;            0&#10;        }&#10;    }&#10;&#10;    val tierPrice = selectedTier?.let { tierPrices[it] } ?: 0.0&#10;    val totalPrice = durationHours * tierPrice&#10;&#10;    // Check if form is complete&#10;    val isFormComplete = selectedPetNames != null &amp;&amp;&#10;                         selectedTier != null &amp;&amp;&#10;                         selectedBranch != null &amp;&amp;&#10;                         (if (serviceType == &quot;Boarding&quot;) {&#10;                             startDate != &quot;00/00/0000&quot; &amp;&amp; endDate != &quot;00/00/0000&quot;&#10;                         } else {&#10;                             (startTime != &quot;00:00&quot; || endTime != &quot;00:00&quot;) &amp;&amp; startDate != &quot;00/00/0000&quot;&#10;                         })&#10;&#10;    val scrollState = rememberScrollState()&#10;    val iconRotation by animateFloatAsState(&#10;        targetValue = if (isPriceExpanded) 0f else 180f,&#10;        animationSpec = tween(durationMillis = 300),&#10;        label = &quot;icon rotation&quot;&#10;    )&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(White)&#10;            .windowInsetsPadding(WindowInsets.systemBars)&#10;    ) {&#10;        // Header&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(top = 8.dp, bottom = 8.dp)&#10;        ) {&#10;            IconButton(&#10;                onClick = onNavigateBack,&#10;                modifier = Modifier.align(Alignment.CenterStart)&#10;            ) {&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.icon_arrowleft_foreground),&#10;                    contentDescription = &quot;Back&quot;,&#10;                    modifier = Modifier.size(24.dp)&#10;                )&#10;            }&#10;&#10;            Text(&#10;                text = &quot;Buat Pesanan&quot;,&#10;                fontSize = 20.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = BlackText,&#10;                modifier = Modifier.align(Alignment.Center)&#10;            )&#10;        }&#10;&#10;        // Scrollable content&#10;        Column(&#10;            modifier = Modifier&#10;                .weight(1f)&#10;                .verticalScroll(scrollState)&#10;                .padding(horizontal = 24.dp)&#10;        ) {&#10;            // Pet Selection&#10;            OrderFormField(&#10;                iconRes = R.drawable.icon_petoption_foreground,&#10;                label = &quot;Hewan Peliharaan&quot;,&#10;                value = selectedPetNames ?: &quot;Pilih hewan peliharaanmu&quot;,&#10;                onClick = { onNavigateToPetSelection(startTime, startDate, endTime, endDate) },&#10;                isPlaceholder = selectedPetNames == null,&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Duration Section&#10;            Text(&#10;                text = &quot;Durasi&quot;,&#10;                fontSize = 16.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = BlackText,&#10;                modifier = Modifier.padding(bottom = 8.dp)&#10;            )&#10;&#10;            // Start Duration&#10;            DurationField(&#10;                label = &quot;Dari :&quot;,&#10;                time = startTime,&#10;                date = startDate,&#10;                onClick = {&#10;                    if (serviceType == &quot;Boarding&quot;) {&#10;                        showStartDatePicker = true&#10;                    } else {&#10;                        showStartTimePicker = true&#10;                    }&#10;                },&#10;                modifier = Modifier.padding(bottom = 12.dp)&#10;            )&#10;&#10;            // End Duration&#10;            DurationField(&#10;                label = &quot;Sampai :&quot;,&#10;                time = endTime,&#10;                date = endDate,&#10;                onClick = {&#10;                    if (serviceType == &quot;Boarding&quot;) {&#10;                        showEndDatePicker = true&#10;                    } else {&#10;                        showEndTimePicker = true&#10;                    }&#10;                },&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Service Tier&#10;            OrderFormField(&#10;                iconRes = R.drawable.icon_tier_foreground,&#10;                label = &quot;Tingkat Layanan&quot;,&#10;                value = selectedTier ?: &quot;Tingkat Layanan&quot;,&#10;                onClick = { onNavigateToTierSelection(startTime, startDate, endTime, endDate) },&#10;                isPlaceholder = selectedTier == null,&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Branch&#10;            OrderFormField(&#10;                iconRes = R.drawable.icon_branch_foreground,&#10;                label = &quot;Cabang&quot;,&#10;                value = selectedBranch ?: &quot;Cabang&quot;,&#10;                onClick = { onNavigateToBranchSelection(startTime, startDate, endTime, endDate) },&#10;                isPlaceholder = selectedBranch == null,&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Notes&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(bottom = 24.dp)&#10;            ) {&#10;                Text(&#10;                    text = &quot;Catatan&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = BlackText,&#10;                    modifier = Modifier.padding(bottom = 8.dp)&#10;                )&#10;&#10;                OutlinedTextField(&#10;                    value = note,&#10;                    onValueChange = { note = it },&#10;                    placeholder = {&#10;                        Row(&#10;                            verticalAlignment = Alignment.CenterVertically,&#10;                            horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;                        ) {&#10;                            Image(&#10;                                painter = painterResource(id = R.drawable.icon_note_foreground),&#10;                                contentDescription = &quot;Note icon&quot;,&#10;                                modifier = Modifier.size(16.dp)&#10;                            )&#10;                            Text(&#10;                                text = &quot;Ketik catatanmu di sini&quot;,&#10;                                color = GrayText,&#10;                                fontSize = 14.sp&#10;                            )&#10;                        }&#10;                    },&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(100.dp),&#10;                    shape = RoundedCornerShape(12.dp),&#10;                    colors = OutlinedTextFieldDefaults.colors(&#10;                        unfocusedBorderColor = GrayText.copy(alpha = 0.3f),&#10;                        focusedBorderColor = PetPalDarkGreen,&#10;                        unfocusedContainerColor = GrayText.copy(alpha = 0.1f),&#10;                        focusedContainerColor = GrayText.copy(alpha = 0.1f),&#10;                        unfocusedTextColor = BlackText,&#10;                        focusedTextColor = BlackText&#10;                    )&#10;                )&#10;            }&#10;        }&#10;&#10;        // Date/Time Pickers&#10;        if (showStartDatePicker) {&#10;            DateTimePickerDialog(&#10;                onDismiss = { showStartDatePicker = false },&#10;                onDateTimeSelected = { time, date -&gt;&#10;                    startTime = time&#10;                    startDate = date&#10;                    showStartDatePicker = false&#10;                },&#10;                isStart = true,&#10;                currentStartTime = startTime,&#10;                currentStartDate = startDate,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        if (showStartTimePicker) {&#10;            TimePickerDialog(&#10;                onDismiss = { showStartTimePicker = false },&#10;                onTimeSelected = { time -&gt;&#10;                    startTime = time&#10;                    showStartTimePicker = false&#10;                },&#10;                isStart = true,&#10;                currentStartTime = startTime,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        if (showEndDatePicker) {&#10;            DateTimePickerDialog(&#10;                onDismiss = { showEndDatePicker = false },&#10;                onDateTimeSelected = { time, date -&gt;&#10;                    endTime = time&#10;                    endDate = date&#10;                    showEndDatePicker = false&#10;                },&#10;                isStart = false,&#10;                currentStartTime = startTime,&#10;                currentStartDate = startDate,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        if (showEndTimePicker) {&#10;            TimePickerDialog(&#10;                onDismiss = { showEndTimePicker = false },&#10;                onTimeSelected = { time -&gt;&#10;                    endTime = time&#10;                    showEndTimePicker = false&#10;                },&#10;                isStart = false,&#10;                currentStartTime = startTime,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        // Price Section - Sticky above button&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .background(White)&#10;                .padding(horizontal = 24.dp)&#10;        ) {&#10;            // Total Price Header (Clickable)&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .clickable { isPriceExpanded = !isPriceExpanded }&#10;                    .padding(vertical = 8.dp),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Text(&#10;                    text = &quot;Total Harga : Rp ${formatPrice(totalPrice)}&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = BlackText,&#10;                    modifier = Modifier.weight(1f)&#10;                )&#10;&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.icon_pricedetail_foreground),&#10;                    contentDescription = &quot;Price detail&quot;,&#10;                    modifier = Modifier&#10;                        .size(20.dp)&#10;                        .rotate(iconRotation)&#10;                )&#10;            }&#10;&#10;            // Expanded Price Details&#10;            if (isPriceExpanded) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(top = 12.dp)&#10;                ) {&#10;                    HorizontalDivider(&#10;                        color = GrayText.copy(alpha = 0.3f),&#10;                        modifier = Modifier.padding(bottom = 12.dp)&#10;                    )&#10;&#10;                    PriceDetailRow(&#10;                        label = &quot;Durasi&quot;,&#10;                        value = &quot;$durationHours jam&quot;&#10;                    )&#10;&#10;                    PriceDetailRow(&#10;                        label = &quot;Harga per jam&quot;,&#10;                        value = &quot;Rp ${formatPrice(tierPrice)}&quot;&#10;                    )&#10;&#10;                    HorizontalDivider(&#10;                        color = GrayText.copy(alpha = 0.3f),&#10;                        modifier = Modifier.padding(vertical = 12.dp)&#10;                    )&#10;&#10;                    PriceDetailRow(&#10;                        label = &quot;Total&quot;,&#10;                        value = &quot;Rp ${formatPrice(totalPrice)}&quot;,&#10;                        isBold = true&#10;                    )&#10;                }&#10;            }&#10;        }&#10;&#10;        // Bottom Button&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .background(White)&#10;                .padding(horizontal = 24.dp)&#10;                .padding(bottom = 24.dp, top = 8.dp)&#10;        ) {&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .background(&#10;                        color = if (isFormComplete) PetPalDarkGreen else GrayText.copy(alpha = 0.5f),&#10;                        shape = RoundedCornerShape(32.dp)&#10;                    )&#10;                    .clickable(enabled = isFormComplete) {&#10;                        if (isFormComplete) {&#10;                            onSubmitOrder(&#10;                                selectedPets,&#10;                                selectedPetNames ?: &quot;&quot;,&#10;                                startTime,&#10;                                startDate,&#10;                                endTime,&#10;                                endDate,&#10;                                selectedTier ?: &quot;&quot;,&#10;                                selectedBranch ?: &quot;&quot;,&#10;                                note,&#10;                                durationHours,&#10;                                tierPrice,&#10;                                totalPrice&#10;                            )&#10;                        }&#10;                    }&#10;                    .padding(16.dp),&#10;                horizontalArrangement = Arrangement.Center,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.icon_arrowright),&#10;                    contentDescription = null,&#10;                    modifier = Modifier.size(20.dp)&#10;                )&#10;&#10;                Spacer(modifier = Modifier.width(8.dp))&#10;&#10;                Text(&#10;                    text = &quot;Lakukan Pembayaran&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = White&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun DurationField(&#10;    label: String,&#10;    time: String,&#10;    date: String,&#10;    onClick: () -&gt; Unit,&#10;    modifier: Modifier = Modifier&#10;) {&#10;    Row(&#10;        modifier = modifier&#10;            .fillMaxWidth()&#10;            .clickable(onClick = onClick)&#10;            .background(&#10;                color = GrayText.copy(alpha = 0.1f),&#10;                shape = RoundedCornerShape(12.dp)&#10;            )&#10;            .padding(16.dp),&#10;        verticalAlignment = Alignment.CenterVertically&#10;    ) {&#10;        Image(&#10;            painter = painterResource(id = R.drawable.icon_calendar_foreground),&#10;            contentDescription = &quot;Calendar&quot;,&#10;            modifier = Modifier.size(20.dp)&#10;        )&#10;&#10;        Spacer(modifier = Modifier.width(12.dp))&#10;&#10;        Text(&#10;            text = label,&#10;            fontSize = 14.sp,&#10;            color = BlackText,&#10;            fontWeight = FontWeight.Medium&#10;        )&#10;&#10;        Spacer(modifier = Modifier.width(8.dp))&#10;&#10;        Text(&#10;            text = &quot;$time, $date&quot;,&#10;            fontSize = 14.sp,&#10;            color = if (time == &quot;00:00&quot; &amp;&amp; date == &quot;00/00/0000&quot;) GrayText else BlackText&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun PriceDetailRow(&#10;    label: String,&#10;    value: String,&#10;    isBold: Boolean = false&#10;) {&#10;    Row(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(vertical = 4.dp),&#10;        horizontalArrangement = Arrangement.SpaceBetween&#10;    ) {&#10;        Text(&#10;            text = label,&#10;            fontSize = 14.sp,&#10;            fontWeight = if (isBold) FontWeight.Bold else FontWeight.Normal,&#10;            color = BlackText&#10;        )&#10;&#10;        Text(&#10;            text = value,&#10;            fontSize = 14.sp,&#10;            fontWeight = if (isBold) FontWeight.Bold else FontWeight.Normal,&#10;            color = BlackText&#10;        )&#10;    }&#10;}&#10;&#10;private fun formatPrice(price: Double): String {&#10;    val formatter = NumberFormat.getInstance(Locale.forLanguageTag(&quot;id-ID&quot;))&#10;    return formatter.format(price.toLong())&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;private fun DateTimePickerDialog(&#10;    onDismiss: () -&gt; Unit,&#10;    onDateTimeSelected: (String, String) -&gt; Unit,&#10;    isStart: Boolean,&#10;    @Suppress(&quot;UNUSED_PARAMETER&quot;) currentStartTime: String,&#10;    currentStartDate: String,&#10;    context: android.content.Context&#10;) {&#10;    val calendar = Calendar.getInstance()&#10;&#10;    // Parse current start date/time if available for end date validation&#10;    if (!isStart &amp;&amp; currentStartDate != &quot;00/00/0000&quot;) {&#10;        try {&#10;            val parts = currentStartDate.split(&quot;/&quot;)&#10;            if (parts.size == 3) {&#10;                calendar.set(parts[2].toInt(), parts[1].toInt() - 1, parts[0].toInt())&#10;            }&#10;        } catch (_: Exception) {&#10;            // Keep current date&#10;        }&#10;    }&#10;&#10;    val now = Calendar.getInstance()&#10;    val todayStart = Calendar.getInstance().apply {&#10;        set(Calendar.HOUR_OF_DAY, 0)&#10;        set(Calendar.MINUTE, 0)&#10;        set(Calendar.SECOND, 0)&#10;        set(Calendar.MILLISECOND, 0)&#10;    }&#10;&#10;    val minDate = if (isStart) {&#10;        // For start date, allow today (but will validate time later)&#10;        todayStart.timeInMillis&#10;    } else {&#10;        // For end date, minimum is start date&#10;        calendar.timeInMillis&#10;    }&#10;&#10;    val datePickerState = rememberDatePickerState(&#10;        initialSelectedDateMillis = Calendar.getInstance().timeInMillis&#10;    )&#10;&#10;    var showTimePicker by remember { mutableStateOf(false) }&#10;&#10;    if (!showTimePicker) {&#10;        DatePickerDialog(&#10;            onDismissRequest = onDismiss,&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = {&#10;                        datePickerState.selectedDateMillis?.let { millis -&gt;&#10;                            // Validate date is not before minimum&#10;                            if (millis &gt;= minDate) {&#10;                                showTimePicker = true&#10;                            } else {&#10;                                Toast.makeText(&#10;                                    context,&#10;                                    &quot;Tidak dapat memilih tanggal yang sudah lewat&quot;,&#10;                                    Toast.LENGTH_SHORT&#10;                                ).show()&#10;                            }&#10;                        }&#10;                    }&#10;                ) {&#10;                    Text(&quot;Pilih Waktu&quot;)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = onDismiss) {&#10;                    Text(&quot;Batal&quot;)&#10;                }&#10;            }&#10;        ) {&#10;            DatePicker(state = datePickerState)&#10;        }&#10;    } else {&#10;        val timePickerState = rememberTimePickerState(&#10;            initialHour = 0,&#10;            initialMinute = 0,&#10;            is24Hour = true&#10;        )&#10;&#10;        androidx.compose.material3.AlertDialog(&#10;            onDismissRequest = onDismiss,&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = {&#10;                        datePickerState.selectedDateMillis?.let { millis -&gt;&#10;                            val selectedCalendar = Calendar.getInstance().apply {&#10;                                timeInMillis = millis&#10;                            }&#10;&#10;                            val dateString = SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault())&#10;                                .format(selectedCalendar.time)&#10;                            val timeString = String.format(Locale.getDefault(), &quot;%02d:%02d&quot;, timePickerState.hour, timePickerState.minute)&#10;&#10;                            // Validate time if same day&#10;                            val isSameDay = selectedCalendar.get(Calendar.YEAR) == now.get(Calendar.YEAR) &amp;&amp;&#10;                                    selectedCalendar.get(Calendar.DAY_OF_YEAR) == now.get(Calendar.DAY_OF_YEAR)&#10;&#10;                            if (isSameDay) {&#10;                                val selectedHour = timePickerState.hour&#10;                                val selectedMinute = timePickerState.minute&#10;                                val currentHour = now.get(Calendar.HOUR_OF_DAY)&#10;                                val currentMinute = now.get(Calendar.MINUTE)&#10;&#10;                                if (selectedHour &gt; currentHour || (selectedHour == currentHour &amp;&amp; selectedMinute &gt;= currentMinute)) {&#10;                                    onDateTimeSelected(timeString, dateString)&#10;                                } else {&#10;                                    Toast.makeText(&#10;                                        context,&#10;                                        &quot;Tidak dapat memilih waktu yang sudah lewat&quot;,&#10;                                        Toast.LENGTH_SHORT&#10;                                    ).show()&#10;                                }&#10;                            } else {&#10;                                onDateTimeSelected(timeString, dateString)&#10;                            }&#10;                        }&#10;                    }&#10;                ) {&#10;                    Text(&quot;OK&quot;)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = onDismiss) {&#10;                    Text(&quot;Batal&quot;)&#10;                }&#10;            },&#10;            text = {&#10;                Column(&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    modifier = Modifier.fillMaxWidth()&#10;                ) {&#10;                    TimePicker(state = timePickerState)&#10;                }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;private fun TimePickerDialog(&#10;    onDismiss: () -&gt; Unit,&#10;    onTimeSelected: (String) -&gt; Unit,&#10;    isStart: Boolean,&#10;    currentStartTime: String,&#10;    context: android.content.Context&#10;) {&#10;    val now = Calendar.getInstance()&#10;    val currentHour = now.get(Calendar.HOUR_OF_DAY)&#10;    val currentMinute = now.get(Calendar.MINUTE)&#10;&#10;    // Parse start time for end time validation&#10;    var startHour = currentHour&#10;    var startMinute = currentMinute&#10;    if (!isStart &amp;&amp; currentStartTime != &quot;00:00&quot;) {&#10;        try {&#10;            val parts = currentStartTime.split(&quot;:&quot;)&#10;            if (parts.size == 2) {&#10;                startHour = parts[0].toInt()&#10;                startMinute = parts[1].toInt()&#10;            }&#10;        } catch (_: Exception) {&#10;            // Use current time&#10;        }&#10;    }&#10;&#10;    val minHour = if (isStart) currentHour else startHour&#10;    val minMinute = if (isStart) currentMinute else startMinute&#10;&#10;    val timePickerState = rememberTimePickerState(&#10;        initialHour = minHour,&#10;        initialMinute = minMinute,&#10;        is24Hour = true&#10;    )&#10;&#10;    androidx.compose.material3.AlertDialog(&#10;        onDismissRequest = onDismiss,&#10;        confirmButton = {&#10;            TextButton(&#10;                onClick = {&#10;                    val selectedHour = timePickerState.hour&#10;                    val selectedMinute = timePickerState.minute&#10;&#10;                    // Validate time&#10;                    val isValid = if (isStart) {&#10;                        selectedHour &gt; minHour || (selectedHour == minHour &amp;&amp; selectedMinute &gt;= minMinute)&#10;                    } else {&#10;                        selectedHour &gt; minHour || (selectedHour == minHour &amp;&amp; selectedMinute &gt; minMinute)&#10;                    }&#10;&#10;                    if (isValid) {&#10;                        val timeString = String.format(Locale.getDefault(), &quot;%02d:%02d&quot;, selectedHour, selectedMinute)&#10;                        onTimeSelected(timeString)&#10;                    } else {&#10;                        val message = if (isStart) {&#10;                            &quot;Tidak dapat memilih waktu yang sudah lewat&quot;&#10;                        } else {&#10;                            &quot;Waktu akhir harus lebih dari waktu mulai&quot;&#10;                        }&#10;                        Toast.makeText(context, message, Toast.LENGTH_SHORT).show()&#10;                    }&#10;                }&#10;            ) {&#10;                Text(&quot;OK&quot;)&#10;            }&#10;        },&#10;        dismissButton = {&#10;            TextButton(onClick = onDismiss) {&#10;                Text(&quot;Batal&quot;)&#10;            }&#10;        },&#10;        text = {&#10;            Column(&#10;                horizontalAlignment = Alignment.CenterHorizontally,&#10;                modifier = Modifier.fillMaxWidth()&#10;            ) {&#10;                TimePicker(state = timePickerState)&#10;            }&#10;        }&#10;    )&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/petpal/presentation/view/PaymentMethodSelectionScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/petpal/presentation/view/PaymentMethodSelectionScreen.kt" />
              <option name="updatedContent" value="package com.example.petpal.presentation.view&#10;&#10;import androidx.compose.animation.AnimatedVisibility&#10;import androidx.compose.animation.expandVertically&#10;import androidx.compose.animation.shrinkVertically&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.border&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.CircleShape&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material.icons.Icons&#10;import androidx.compose.material.icons.filled.KeyboardArrowDown&#10;import androidx.compose.material.icons.filled.KeyboardArrowUp&#10;import androidx.compose.material3.*&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.clip&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import com.example.petpal.R&#10;import com.example.petpal.presentation.theme.BlackText&#10;import com.example.petpal.presentation.theme.GrayText&#10;import com.example.petpal.presentation.theme.PetPalDarkGreen&#10;import com.example.petpal.presentation.theme.White&#10;&#10;data class PaymentMethod(&#10;    val id: String,&#10;    val name: String,&#10;    val logoRes: Int,&#10;    val category: PaymentCategory&#10;)&#10;&#10;enum class PaymentCategory {&#10;    TRANSFER_BANK,&#10;    E_WALLET&#10;}&#10;&#10;@Composable&#10;fun PaymentMethodSelectionScreen(&#10;    onNavigateBack: () -&gt; Unit,&#10;    onPaymentMethodSelected: (PaymentMethod) -&gt; Unit&#10;) {&#10;    var selectedPaymentMethod by remember { mutableStateOf&lt;PaymentMethod?&gt;(null) }&#10;    var isTransferBankExpanded by remember { mutableStateOf(false) }&#10;    var isEWalletExpanded by remember { mutableStateOf(false) }&#10;    val scrollState = rememberScrollState()&#10;&#10;    val transferBankMethods = listOf(&#10;        PaymentMethod(&quot;bca&quot;, &quot;BCA&quot;, R.drawable.logo_bca, PaymentCategory.TRANSFER_BANK),&#10;        PaymentMethod(&quot;bni&quot;, &quot;BNI&quot;, R.drawable.logo_bni, PaymentCategory.TRANSFER_BANK),&#10;        PaymentMethod(&quot;bri&quot;, &quot;BRI&quot;, R.drawable.logo_bri, PaymentCategory.TRANSFER_BANK),&#10;        PaymentMethod(&quot;mandiri&quot;, &quot;Mandiri&quot;, R.drawable.logo_mandiri, PaymentCategory.TRANSFER_BANK)&#10;    )&#10;&#10;    val eWalletMethods = listOf(&#10;        PaymentMethod(&quot;dana&quot;, &quot;DANA&quot;, R.drawable.logo_dana, PaymentCategory.E_WALLET),&#10;        PaymentMethod(&quot;gopay&quot;, &quot;GoPay&quot;, R.drawable.logo_gopay, PaymentCategory.E_WALLET),&#10;        PaymentMethod(&quot;shopeepay&quot;, &quot;ShopeePay&quot;, R.drawable.logo_shopeepay, PaymentCategory.E_WALLET)&#10;    )&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(White)&#10;            .windowInsetsPadding(WindowInsets.systemBars)&#10;    ) {&#10;        // Header&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(top = 8.dp, bottom = 8.dp)&#10;        ) {&#10;            IconButton(&#10;                onClick = onNavigateBack,&#10;                modifier = Modifier.align(Alignment.CenterStart)&#10;            ) {&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.icon_arrowleft_foreground),&#10;                    contentDescription = &quot;Back&quot;,&#10;                    modifier = Modifier.size(24.dp)&#10;                )&#10;            }&#10;&#10;            Text(&#10;                text = &quot;Metode Pembayaran&quot;,&#10;                fontSize = 20.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = BlackText,&#10;                modifier = Modifier.align(Alignment.Center)&#10;            )&#10;        }&#10;&#10;        // Scrollable content&#10;        Column(&#10;            modifier = Modifier&#10;                .weight(1f)&#10;                .verticalScroll(scrollState)&#10;                .padding(horizontal = 24.dp)&#10;                .padding(top = 16.dp)&#10;        ) {&#10;            // Transfer Bank Section&#10;            PaymentCategorySection(&#10;                icon = R.drawable.icon_tier_foreground,&#10;                title = &quot;Transfer Bank&quot;,&#10;                isExpanded = isTransferBankExpanded,&#10;                onToggle = { isTransferBankExpanded = !isTransferBankExpanded }&#10;            )&#10;&#10;            AnimatedVisibility(&#10;                visible = isTransferBankExpanded,&#10;                enter = expandVertically(),&#10;                exit = shrinkVertically()&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(top = 8.dp)&#10;                ) {&#10;                    transferBankMethods.forEach { method -&gt;&#10;                        PaymentMethodItem(&#10;                            method = method,&#10;                            isSelected = selectedPaymentMethod?.id == method.id,&#10;                            onSelect = { selectedPaymentMethod = method }&#10;                        )&#10;                        Spacer(modifier = Modifier.height(8.dp))&#10;                    }&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(16.dp))&#10;&#10;            // E-Wallet Section&#10;            PaymentCategorySection(&#10;                icon = R.drawable.icon_tier_foreground,&#10;                title = &quot;E-Wallet&quot;,&#10;                isExpanded = isEWalletExpanded,&#10;                onToggle = { isEWalletExpanded = !isEWalletExpanded }&#10;            )&#10;&#10;            AnimatedVisibility(&#10;                visible = isEWalletExpanded,&#10;                enter = expandVertically(),&#10;                exit = shrinkVertically()&#10;            ) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(top = 8.dp)&#10;                ) {&#10;                    eWalletMethods.forEach { method -&gt;&#10;                        PaymentMethodItem(&#10;                            method = method,&#10;                            isSelected = selectedPaymentMethod?.id == method.id,&#10;                            onSelect = { selectedPaymentMethod = method }&#10;                        )&#10;                        Spacer(modifier = Modifier.height(8.dp))&#10;                    }&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(100.dp))&#10;        }&#10;&#10;        // Bottom Button&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .background(White)&#10;                .padding(horizontal = 24.dp)&#10;                .padding(bottom = 24.dp, top = 16.dp)&#10;        ) {&#10;            Button(&#10;                onClick = {&#10;                    selectedPaymentMethod?.let { onPaymentMethodSelected(it) }&#10;                },&#10;                enabled = selectedPaymentMethod != null,&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .height(56.dp),&#10;                colors = ButtonDefaults.buttonColors(&#10;                    containerColor = PetPalDarkGreen,&#10;                    disabledContainerColor = GrayText.copy(alpha = 0.5f)&#10;                ),&#10;                shape = RoundedCornerShape(32.dp)&#10;            ) {&#10;                Text(&#10;                    text = &quot;Pilih Metode Pembayaran&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = White&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun PaymentCategorySection(&#10;    icon: Int,&#10;    title: String,&#10;    isExpanded: Boolean,&#10;    onToggle: () -&gt; Unit&#10;) {&#10;    Surface(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .clickable(onClick = onToggle),&#10;        shape = RoundedCornerShape(12.dp),&#10;        color = PetPalDarkGreen&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp),&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Box(&#10;                modifier = Modifier&#10;                    .size(40.dp)&#10;                    .clip(CircleShape)&#10;                    .background(White.copy(alpha = 0.2f)),&#10;                contentAlignment = Alignment.Center&#10;            ) {&#10;                Image(&#10;                    painter = painterResource(id = icon),&#10;                    contentDescription = title,&#10;                    modifier = Modifier.size(24.dp)&#10;                )&#10;            }&#10;&#10;            Spacer(modifier = Modifier.width(12.dp))&#10;&#10;            Text(&#10;                text = title,&#10;                fontSize = 16.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = White,&#10;                modifier = Modifier.weight(1f)&#10;            )&#10;&#10;            Icon(&#10;                imageVector = if (isExpanded) Icons.Default.KeyboardArrowUp else Icons.Default.KeyboardArrowDown,&#10;                contentDescription = if (isExpanded) &quot;Collapse&quot; else &quot;Expand&quot;,&#10;                tint = White,&#10;                modifier = Modifier.size(24.dp)&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun PaymentMethodItem(&#10;    method: PaymentMethod,&#10;    isSelected: Boolean,&#10;    onSelect: () -&gt; Unit&#10;) {&#10;    Surface(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .clickable(onClick = onSelect),&#10;        shape = RoundedCornerShape(12.dp),&#10;        color = White,&#10;        shadowElevation = if (isSelected) 4.dp else 1.dp,&#10;        tonalElevation = 0.dp&#10;    ) {&#10;        Row(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .border(&#10;                    width = if (isSelected) 2.dp else 0.dp,&#10;                    color = if (isSelected) PetPalDarkGreen else GrayText.copy(alpha = 0.1f),&#10;                    shape = RoundedCornerShape(12.dp)&#10;                )&#10;                .padding(16.dp),&#10;            verticalAlignment = Alignment.CenterVertically&#10;        ) {&#10;            Image(&#10;                painter = painterResource(id = method.logoRes),&#10;                contentDescription = method.name,&#10;                modifier = Modifier&#10;                    .size(40.dp)&#10;                    .clip(RoundedCornerShape(8.dp))&#10;            )&#10;&#10;            Spacer(modifier = Modifier.width(12.dp))&#10;&#10;            Text(&#10;                text = method.name,&#10;                fontSize = 16.sp,&#10;                fontWeight = FontWeight.Medium,&#10;                color = BlackText,&#10;                modifier = Modifier.weight(1f)&#10;            )&#10;&#10;            RadioButton(&#10;                selected = isSelected,&#10;                onClick = onSelect,&#10;                colors = RadioButtonDefaults.colors(&#10;                    selectedColor = PetPalDarkGreen,&#10;                    unselectedColor = GrayText&#10;                )&#10;            )&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/petpal/presentation/view/PemesananScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/petpal/presentation/view/PemesananScreen.kt" />
              <option name="originalContent" value="package com.example.petpal.presentation.view&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.material3.CircularProgressIndicator&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.lifecycle.viewmodel.compose.viewModel&#10;import com.example.petpal.R&#10;import com.example.petpal.presentation.component.PetPalPrimaryButtonWithIcon&#10;import com.example.petpal.presentation.theme.BlackText&#10;import com.example.petpal.presentation.theme.GrayText&#10;import com.example.petpal.presentation.theme.White&#10;import com.example.petpal.presentation.viewmodel.OrderViewModel&#10;import com.example.petpal.utils.UiState&#10;&#10;@Composable&#10;fun PemesananScreen(&#10;    viewModel: OrderViewModel = viewModel(),&#10;    onNavigateToOrderForm: (String) -&gt; Unit = {}&#10;) {&#10;    val state by viewModel.uiState.collectAsState()&#10;    var showServiceSelection by remember { mutableStateOf(false) }&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(White)&#10;            .windowInsetsPadding(WindowInsets.systemBars)&#10;    ) {&#10;        // Header&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(top = 8.dp, bottom = 8.dp),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            Text(&#10;                text = &quot;Pemesanan&quot;,&#10;                fontSize = 20.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = BlackText&#10;            )&#10;        }&#10;&#10;        // Content&#10;        Box(&#10;            modifier = Modifier&#10;                .weight(1f)&#10;                .fillMaxWidth(),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            when (val result = state) {&#10;                is UiState.Loading -&gt; {&#10;                    CircularProgressIndicator()&#10;                }&#10;                is UiState.Error -&gt; {&#10;                    Text(&#10;                        text = result.message,&#10;                        color = Color.Red,&#10;                        modifier = Modifier.padding(16.dp)&#10;                    )&#10;                }&#10;                is UiState.Success -&gt; {&#10;                    if (result.data == null) {&#10;                        // No active order - Show empty state&#10;                        Column(&#10;                            modifier = Modifier.fillMaxSize()&#10;                        ) {&#10;                            // Content area (centered)&#10;                            Box(&#10;                                modifier = Modifier&#10;                                    .weight(1f)&#10;                                    .fillMaxWidth(),&#10;                                contentAlignment = Alignment.Center&#10;                            ) {&#10;                                NoActiveOrderContent()&#10;                            }&#10;&#10;                            // Button at bottom&#10;                            Box(&#10;                                modifier = Modifier&#10;                                    .fillMaxWidth()&#10;                                    .padding(horizontal = 32.dp, vertical = 16.dp)&#10;                            ) {&#10;                                PetPalPrimaryButtonWithIcon(&#10;                                    text = &quot;Sewa Jasa Sitter&quot;,&#10;                                    iconRes = R.drawable.logo_petpal_white,&#10;                                    onClick = { showServiceSelection = true },&#10;                                    modifier = Modifier.fillMaxWidth()&#10;                                )&#10;                            }&#10;                        }&#10;                    } else {&#10;                        // Has active order - Show order details (will be implemented later)&#10;                        Text(&quot;Ada pesanan aktif&quot;, color = BlackText)&#10;                    }&#10;                }&#10;            }&#10;        }&#10;&#10;        // Show service selection bottom sheet&#10;        if (showServiceSelection) {&#10;            ServiceSelectionBottomSheet(&#10;                onDismiss = { showServiceSelection = false },&#10;                onServiceSelected = { serviceType -&gt;&#10;                    showServiceSelection = false&#10;                    onNavigateToOrderForm(serviceType)&#10;                }&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun NoActiveOrderContent() {&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(horizontal = 32.dp),&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        verticalArrangement = Arrangement.Center&#10;    ) {&#10;        // Icon/Illustration&#10;        Image(&#10;            painter = painterResource(id = R.drawable.icon_noactiveorder_foreground),&#10;            contentDescription = &quot;Tidak ada pesanan&quot;,&#10;            modifier = Modifier&#10;                .size(240.dp)&#10;                .padding(bottom = 24.dp)&#10;        )&#10;&#10;        // Title&#10;        Text(&#10;            text = &quot;Tidak Ada Pesanan&quot;,&#10;            fontSize = 20.sp,&#10;            fontWeight = FontWeight.Bold,&#10;            color = BlackText,&#10;            textAlign = TextAlign.Center,&#10;            modifier = Modifier.padding(bottom = 8.dp)&#10;        )&#10;&#10;        // Subtitle&#10;        Text(&#10;            text = &quot;Untuk menampilkan pesanan, silahkan\nlakukan pemesanan dulu yaa&quot;,&#10;            fontSize = 14.sp,&#10;            color = GrayText,&#10;            textAlign = TextAlign.Center,&#10;            lineHeight = 20.sp&#10;        )&#10;    }&#10;}&#10;&#10;&#10;" />
              <option name="updatedContent" value="package com.example.petpal.presentation.view&#10;&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.lazy.LazyColumn&#10;import androidx.compose.foundation.lazy.items&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.material3.CircularProgressIndicator&#10;import androidx.compose.material3.Surface&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.Composable&#10;import androidx.compose.runtime.collectAsState&#10;import androidx.compose.runtime.getValue&#10;import androidx.compose.runtime.mutableStateOf&#10;import androidx.compose.runtime.remember&#10;import androidx.compose.runtime.setValue&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.graphics.Color&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.text.style.TextAlign&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import androidx.lifecycle.viewmodel.compose.viewModel&#10;import com.example.petpal.R&#10;import com.example.petpal.data.model.Order&#10;import com.example.petpal.presentation.component.PetPalPrimaryButtonWithIcon&#10;import com.example.petpal.presentation.theme.BlackText&#10;import com.example.petpal.presentation.theme.GrayText&#10;import com.example.petpal.presentation.theme.PetPalDarkGreen&#10;import com.example.petpal.presentation.theme.White&#10;import com.example.petpal.presentation.viewmodel.OrderViewModel&#10;import com.example.petpal.utils.UiState&#10;&#10;@Composable&#10;fun PemesananScreen(&#10;    viewModel: OrderViewModel = viewModel(),&#10;    onNavigateToOrderForm: (String) -&gt; Unit = {},&#10;    onNavigateToOrderDetail: (String) -&gt; Unit = {}&#10;) {&#10;    val activeOrdersState by viewModel.activeOrders.collectAsState()&#10;    var showServiceSelection by remember { mutableStateOf(false) }&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(White)&#10;            .windowInsetsPadding(WindowInsets.systemBars)&#10;    ) {&#10;        // Header&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(top = 8.dp, bottom = 8.dp),&#10;            contentAlignment = Alignment.Center&#10;        ) {&#10;            Text(&#10;                text = &quot;Pemesanan&quot;,&#10;                fontSize = 20.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = BlackText&#10;            )&#10;        }&#10;&#10;        // Content&#10;        when (val result = activeOrdersState) {&#10;            is UiState.Loading -&gt; {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .weight(1f)&#10;                        .fillMaxWidth(),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    CircularProgressIndicator()&#10;                }&#10;            }&#10;            is UiState.Error -&gt; {&#10;                Box(&#10;                    modifier = Modifier&#10;                        .weight(1f)&#10;                        .fillMaxWidth(),&#10;                    contentAlignment = Alignment.Center&#10;                ) {&#10;                    Text(&#10;                        text = result.message,&#10;                        color = Color.Red,&#10;                        modifier = Modifier.padding(16.dp)&#10;                    )&#10;                }&#10;            }&#10;            is UiState.Success -&gt; {&#10;                if (result.data.isEmpty()) {&#10;                    // No active orders - Show empty state&#10;                    Column(&#10;                        modifier = Modifier.weight(1f).fillMaxWidth()&#10;                    ) {&#10;                        // Content area (centered)&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .weight(1f)&#10;                                .fillMaxWidth(),&#10;                            contentAlignment = Alignment.Center&#10;                        ) {&#10;                            NoActiveOrderContent()&#10;                        }&#10;&#10;                        // Button at bottom&#10;                        Box(&#10;                            modifier = Modifier&#10;                                .fillMaxWidth()&#10;                                .padding(horizontal = 32.dp, vertical = 16.dp)&#10;                        ) {&#10;                            PetPalPrimaryButtonWithIcon(&#10;                                text = &quot;Sewa Jasa Sitter&quot;,&#10;                                iconRes = R.drawable.logo_petpal_white,&#10;                                onClick = { showServiceSelection = true },&#10;                                modifier = Modifier.fillMaxWidth()&#10;                            )&#10;                        }&#10;                    }&#10;                } else {&#10;                    // Has active orders - Show list&#10;                    LazyColumn(&#10;                        modifier = Modifier&#10;                            .weight(1f)&#10;                            .fillMaxWidth()&#10;                            .padding(horizontal = 24.dp, vertical = 16.dp),&#10;                        verticalArrangement = Arrangement.spacedBy(16.dp)&#10;                    ) {&#10;                        items(result.data) { order -&gt;&#10;                            ActiveOrderCard(&#10;                                order = order,&#10;                                onClick = { onNavigateToOrderDetail(order.id) }&#10;                            )&#10;                        }&#10;                    }&#10;&#10;                    // Button at bottom&#10;                    Box(&#10;                        modifier = Modifier&#10;                            .fillMaxWidth()&#10;                            .padding(horizontal = 32.dp, vertical = 16.dp)&#10;                    ) {&#10;                        PetPalPrimaryButtonWithIcon(&#10;                            text = &quot;Sewa Jasa Sitter&quot;,&#10;                            iconRes = R.drawable.logo_petpal_white,&#10;                            onClick = { showServiceSelection = true },&#10;                            modifier = Modifier.fillMaxWidth()&#10;                        )&#10;                    }&#10;                }&#10;            }&#10;        }&#10;&#10;        // Show service selection bottom sheet&#10;        if (showServiceSelection) {&#10;            ServiceSelectionBottomSheet(&#10;                onDismiss = { showServiceSelection = false },&#10;                onServiceSelected = { serviceType -&gt;&#10;                    showServiceSelection = false&#10;                    onNavigateToOrderForm(serviceType)&#10;                }&#10;            )&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun NoActiveOrderContent() {&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(horizontal = 32.dp),&#10;        horizontalAlignment = Alignment.CenterHorizontally,&#10;        verticalArrangement = Arrangement.Center&#10;    ) {&#10;        // Icon/Illustration&#10;        Image(&#10;            painter = painterResource(id = R.drawable.icon_noactiveorder_foreground),&#10;            contentDescription = &quot;Tidak ada pesanan&quot;,&#10;            modifier = Modifier&#10;                .size(240.dp)&#10;                .padding(bottom = 24.dp)&#10;        )&#10;&#10;        // Title&#10;        Text(&#10;            text = &quot;Tidak Ada Pesanan&quot;,&#10;            fontSize = 20.sp,&#10;            fontWeight = FontWeight.Bold,&#10;            color = BlackText,&#10;            textAlign = TextAlign.Center,&#10;            modifier = Modifier.padding(bottom = 8.dp)&#10;        )&#10;&#10;        // Subtitle&#10;        Text(&#10;            text = &quot;Untuk menampilkan pesanan, silahkan\nlakukan pemesanan dulu yaa&quot;,&#10;            fontSize = 14.sp,&#10;            color = GrayText,&#10;            textAlign = TextAlign.Center,&#10;            lineHeight = 20.sp&#10;        )&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun ActiveOrderCard(&#10;    order: Order,&#10;    onClick: () -&gt; Unit&#10;) {&#10;    Surface(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .clickable(onClick = onClick),&#10;        shape = RoundedCornerShape(16.dp),&#10;        color = White,&#10;        shadowElevation = 2.dp,&#10;        tonalElevation = 0.dp&#10;    ) {&#10;        Column(&#10;            modifier = Modifier.padding(16.dp)&#10;        ) {&#10;            // Header row with service type and status&#10;            Row(&#10;                modifier = Modifier.fillMaxWidth(),&#10;                horizontalArrangement = Arrangement.SpaceBetween,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Surface(&#10;                    shape = RoundedCornerShape(8.dp),&#10;                    color = PetPalDarkGreen&#10;                ) {&#10;                    Text(&#10;                        text = order.service,&#10;                        fontSize = 12.sp,&#10;                        fontWeight = FontWeight.Bold,&#10;                        color = White,&#10;                        modifier = Modifier.padding(horizontal = 12.dp, vertical = 4.dp)&#10;                    )&#10;                }&#10;&#10;                Surface(&#10;                    shape = RoundedCornerShape(8.dp),&#10;                    color = if (order.status == &quot;Accepted&quot;) PetPalDarkGreen else GrayText&#10;                ) {&#10;                    Text(&#10;                        text = order.status,&#10;                        fontSize = 12.sp,&#10;                        fontWeight = FontWeight.Bold,&#10;                        color = White,&#10;                        modifier = Modifier.padding(horizontal = 12.dp, vertical = 4.dp)&#10;                    )&#10;                }&#10;            }&#10;&#10;            Spacer(modifier = Modifier.height(12.dp))&#10;&#10;            // Order details&#10;            OrderDetailItem(&quot;Cabang&quot;, order.branch)&#10;            OrderDetailItem(&quot;Tingkat Layanan&quot;, order.tier)&#10;            OrderDetailItem(&quot;Harga&quot;, &quot;Rp ${formatOrderPrice(order.price)}&quot;)&#10;&#10;            if (order.notes.isNotEmpty()) {&#10;                OrderDetailItem(&quot;Catatan&quot;, order.notes)&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun OrderDetailItem(label: String, value: String) {&#10;    Row(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(vertical = 4.dp),&#10;        horizontalArrangement = Arrangement.SpaceBetween&#10;    ) {&#10;        Text(&#10;            text = label,&#10;            fontSize = 14.sp,&#10;            color = GrayText&#10;        )&#10;        Text(&#10;            text = value,&#10;            fontSize = 14.sp,&#10;            fontWeight = FontWeight.Medium,&#10;            color = BlackText&#10;        )&#10;    }&#10;}&#10;&#10;private fun formatOrderPrice(price: Double): String {&#10;    val formatter = java.text.NumberFormat.getInstance(java.util.Locale.forLanguageTag(&quot;id-ID&quot;))&#10;    return formatter.format(price.toLong())&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>