<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/petpal/presentation/view/OrderFormScreen.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/petpal/presentation/view/OrderFormScreen.kt" />
              <option name="originalContent" value="package com.example.petpal.presentation.view&#10;&#10;import androidx.compose.animation.core.animateFloatAsState&#10;import androidx.compose.animation.core.tween&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material3.DatePicker&#10;import androidx.compose.material3.DatePickerDialog&#10;import androidx.compose.material3.ExperimentalMaterial3Api&#10;import androidx.compose.material3.HorizontalDivider&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.material3.TimePicker&#10;import androidx.compose.material3.rememberDatePickerState&#10;import androidx.compose.material3.rememberTimePickerState&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.OutlinedTextFieldDefaults&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.rotate&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import android.widget.Toast&#10;import com.example.petpal.R&#10;import com.example.petpal.presentation.component.DurationField&#10;import com.example.petpal.presentation.component.OrderFormField&#10;import com.example.petpal.presentation.theme.BlackText&#10;import com.example.petpal.presentation.theme.GrayText&#10;import com.example.petpal.presentation.theme.PetPalDarkGreen&#10;import com.example.petpal.presentation.theme.White&#10;import java.text.NumberFormat&#10;import java.text.SimpleDateFormat&#10;import java.util.Calendar&#10;import java.util.Locale&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun OrderFormScreen(&#10;    serviceType: String,&#10;    onNavigateBack: () -&gt; Unit,&#10;    onSelectPet: () -&gt; Unit = {},&#10;    onSelectTier: () -&gt; Unit = {},&#10;    onSelectBranch: () -&gt; Unit = {},&#10;    onSubmitOrder: () -&gt; Unit = {}&#10;) {&#10;    val context = LocalContext.current&#10;&#10;    // Get current date for Daycare service&#10;    val currentCalendar = Calendar.getInstance()&#10;    val currentDateString = SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault()).format(currentCalendar.time)&#10;&#10;    // Form state&#10;    var selectedPet by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    var startTime by remember { mutableStateOf(&quot;00:00&quot;) }&#10;    var startDate by remember { mutableStateOf(if (serviceType == &quot;Daycare&quot;) currentDateString else &quot;00/00/0000&quot;) }&#10;    var endTime by remember { mutableStateOf(&quot;00:00&quot;) }&#10;    var endDate by remember { mutableStateOf(if (serviceType == &quot;Daycare&quot;) currentDateString else &quot;00/00/0000&quot;) }&#10;    var selectedTier by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    var selectedBranch by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    var note by remember { mutableStateOf(&quot;&quot;) }&#10;    var isPriceExpanded by remember { mutableStateOf(false) }&#10;&#10;    // Dialog states&#10;    var showStartDatePicker by remember { mutableStateOf(false) }&#10;    var showStartTimePicker by remember { mutableStateOf(false) }&#10;    var showEndDatePicker by remember { mutableStateOf(false) }&#10;    var showEndTimePicker by remember { mutableStateOf(false) }&#10;&#10;    // Calculate total price&#10;    val tierPrices = mapOf(&#10;        &quot;Regular&quot; to 50000.0,&#10;        &quot;VIP&quot; to 75000.0,&#10;        &quot;VVIP&quot; to 100000.0&#10;    )&#10;&#10;    // Mock duration calculation (will be replaced with actual datetime calculation)&#10;    val durationHours = 0 // TODO: Calculate from actual start and end times&#10;    val tierPrice = selectedTier?.let { tierPrices[it] } ?: 0.0&#10;    val totalPrice = durationHours * tierPrice&#10;&#10;    // Check if form is complete&#10;    val isFormComplete = selectedPet != null &amp;&amp;&#10;                         startTime != &quot;00:00&quot; &amp;&amp;&#10;                         endTime != &quot;00:00&quot; &amp;&amp;&#10;                         selectedTier != null &amp;&amp;&#10;                         selectedBranch != null&#10;&#10;    val scrollState = rememberScrollState()&#10;    val iconRotation by animateFloatAsState(&#10;        targetValue = if (isPriceExpanded) 180f else 0f,&#10;        animationSpec = tween(durationMillis = 300),&#10;        label = &quot;icon rotation&quot;&#10;    )&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(White)&#10;            .windowInsetsPadding(WindowInsets.systemBars)&#10;    ) {&#10;        // Header&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp)&#10;        ) {&#10;            IconButton(&#10;                onClick = onNavigateBack,&#10;                modifier = Modifier.align(Alignment.CenterStart)&#10;            ) {&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.icon_close_foreground),&#10;                    contentDescription = &quot;Close&quot;,&#10;                    modifier = Modifier.size(24.dp)&#10;                )&#10;            }&#10;&#10;            Text(&#10;                text = &quot;Buat Pesanan&quot;,&#10;                fontSize = 20.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = BlackText,&#10;                modifier = Modifier.align(Alignment.Center)&#10;            )&#10;        }&#10;&#10;        // Scrollable content&#10;        Column(&#10;            modifier = Modifier&#10;                .weight(1f)&#10;                .verticalScroll(scrollState)&#10;                .padding(horizontal = 24.dp)&#10;        ) {&#10;            // Pet Selection&#10;            OrderFormField(&#10;                iconRes = R.drawable.icon_petoption_foreground,&#10;                label = &quot;Hewan Peliharaan&quot;,&#10;                value = selectedPet ?: &quot;Pilih hewan peliharaanmu&quot;,&#10;                onClick = onSelectPet,&#10;                isPlaceholder = selectedPet == null,&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Duration Section&#10;            Text(&#10;                text = &quot;Durasi&quot;,&#10;                fontSize = 16.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = BlackText,&#10;                modifier = Modifier.padding(bottom = 8.dp)&#10;            )&#10;&#10;            // Start Duration&#10;            DurationField(&#10;                label = &quot;Dari :&quot;,&#10;                time = startTime,&#10;                date = startDate,&#10;                onClick = {&#10;                    if (serviceType == &quot;Boarding&quot;) {&#10;                        showStartDatePicker = true&#10;                    } else {&#10;                        showStartTimePicker = true&#10;                    }&#10;                },&#10;                modifier = Modifier.padding(bottom = 12.dp)&#10;            )&#10;&#10;            // End Duration&#10;            DurationField(&#10;                label = &quot;Sampai :&quot;,&#10;                time = endTime,&#10;                date = endDate,&#10;                onClick = {&#10;                    if (serviceType == &quot;Boarding&quot;) {&#10;                        showEndDatePicker = true&#10;                    } else {&#10;                        showEndTimePicker = true&#10;                    }&#10;                },&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Service Tier&#10;            OrderFormField(&#10;                iconRes = R.drawable.icon_tier_foreground,&#10;                label = &quot;Tingkat Layanan&quot;,&#10;                value = selectedTier ?: &quot;Tingkat Layanan&quot;,&#10;                onClick = onSelectTier,&#10;                isPlaceholder = selectedTier == null,&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Branch&#10;            OrderFormField(&#10;                iconRes = R.drawable.icon_branch_foreground,&#10;                label = &quot;Cabang&quot;,&#10;                value = selectedBranch ?: &quot;Cabang&quot;,&#10;                onClick = onSelectBranch,&#10;                isPlaceholder = selectedBranch == null,&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Notes&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(bottom = 24.dp)&#10;            ) {&#10;                Text(&#10;                    text = &quot;Catatan&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = BlackText,&#10;                    modifier = Modifier.padding(bottom = 8.dp)&#10;                )&#10;&#10;                OutlinedTextField(&#10;                    value = note,&#10;                    onValueChange = { note = it },&#10;                    placeholder = {&#10;                        Row(&#10;                            verticalAlignment = Alignment.CenterVertically,&#10;                            horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;                        ) {&#10;                            Image(&#10;                                painter = painterResource(id = R.drawable.icon_note_foreground),&#10;                                contentDescription = &quot;Note icon&quot;,&#10;                                modifier = Modifier.size(16.dp)&#10;                            )&#10;                            Text(&#10;                                text = &quot;Ketik catatanmu di sini&quot;,&#10;                                color = GrayText,&#10;                                fontSize = 14.sp&#10;                            )&#10;                        }&#10;                    },&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(100.dp),&#10;                    shape = RoundedCornerShape(12.dp),&#10;                    colors = OutlinedTextFieldDefaults.colors(&#10;                        unfocusedBorderColor = GrayText.copy(alpha = 0.3f),&#10;                        focusedBorderColor = PetPalDarkGreen,&#10;                        unfocusedContainerColor = GrayText.copy(alpha = 0.1f),&#10;                        focusedContainerColor = GrayText.copy(alpha = 0.1f),&#10;                        unfocusedTextColor = BlackText,&#10;                        focusedTextColor = BlackText&#10;                    )&#10;                )&#10;            }&#10;        }&#10;&#10;        // Date/Time Pickers&#10;        if (showStartDatePicker) {&#10;            DateTimePickerDialog(&#10;                onDismiss = { showStartDatePicker = false },&#10;                onDateTimeSelected = { time, date -&gt;&#10;                    startTime = time&#10;                    startDate = date&#10;                    showStartDatePicker = false&#10;                },&#10;                isStart = true,&#10;                currentStartTime = startTime,&#10;                currentStartDate = startDate,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        if (showStartTimePicker) {&#10;            TimePickerDialog(&#10;                onDismiss = { showStartTimePicker = false },&#10;                onTimeSelected = { time -&gt;&#10;                    startTime = time&#10;                    showStartTimePicker = false&#10;                },&#10;                isStart = true,&#10;                currentStartTime = startTime,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        if (showEndDatePicker) {&#10;            DateTimePickerDialog(&#10;                onDismiss = { showEndDatePicker = false },&#10;                onDateTimeSelected = { time, date -&gt;&#10;                    endTime = time&#10;                    endDate = date&#10;                    showEndDatePicker = false&#10;                },&#10;                isStart = false,&#10;                currentStartTime = startTime,&#10;                currentStartDate = startDate,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        if (showEndTimePicker) {&#10;            TimePickerDialog(&#10;                onDismiss = { showEndTimePicker = false },&#10;                onTimeSelected = { time -&gt;&#10;                    endTime = time&#10;                    showEndTimePicker = false&#10;                },&#10;                isStart = false,&#10;                currentStartTime = startTime,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        // Price Section - Sticky above button&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .background(White)&#10;                .padding(horizontal = 24.dp)&#10;        ) {&#10;            // Total Price Header (Clickable)&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .clickable { isPriceExpanded = !isPriceExpanded }&#10;                    .padding(vertical = 8.dp),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Text(&#10;                    text = &quot;Total Harga : Rp ${formatPrice(totalPrice)}&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = BlackText,&#10;                    modifier = Modifier.weight(1f)&#10;                )&#10;&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.icon_pricedetail_foreground),&#10;                    contentDescription = &quot;Price detail&quot;,&#10;                    modifier = Modifier&#10;                        .size(20.dp)&#10;                        .rotate(iconRotation)&#10;                )&#10;            }&#10;&#10;            // Expanded Price Details&#10;            if (isPriceExpanded) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(top = 12.dp)&#10;                ) {&#10;                    HorizontalDivider(&#10;                        color = GrayText.copy(alpha = 0.3f),&#10;                        modifier = Modifier.padding(bottom = 12.dp)&#10;                    )&#10;&#10;                    PriceDetailRow(&#10;                        label = &quot;Durasi&quot;,&#10;                        value = &quot;$durationHours jam&quot;&#10;                    )&#10;&#10;                    PriceDetailRow(&#10;                        label = &quot;Harga per jam&quot;,&#10;                        value = &quot;Rp ${formatPrice(tierPrice)}&quot;&#10;                    )&#10;&#10;                    HorizontalDivider(&#10;                        color = GrayText.copy(alpha = 0.3f),&#10;                        modifier = Modifier.padding(vertical = 12.dp)&#10;                    )&#10;&#10;                    PriceDetailRow(&#10;                        label = &quot;Total&quot;,&#10;                        value = &quot;Rp ${formatPrice(totalPrice)}&quot;,&#10;                        isBold = true&#10;                    )&#10;                }&#10;            }&#10;        }&#10;&#10;        // Bottom Button&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .background(White)&#10;                .padding(horizontal = 24.dp)&#10;                .padding(bottom = 24.dp, top = 8.dp)&#10;        ) {&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .background(&#10;                        color = if (isFormComplete) PetPalDarkGreen else GrayText.copy(alpha = 0.5f),&#10;                        shape = RoundedCornerShape(32.dp)&#10;                    )&#10;                    .clickable(enabled = isFormComplete) {&#10;                        if (isFormComplete) onSubmitOrder()&#10;                    }&#10;                    .padding(16.dp),&#10;                horizontalArrangement = Arrangement.Center,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.icon_arrowright),&#10;                    contentDescription = null,&#10;                    modifier = Modifier.size(20.dp)&#10;                )&#10;&#10;                Spacer(modifier = Modifier.width(8.dp))&#10;&#10;                Text(&#10;                    text = &quot;Lakukan Pembayaran&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = White&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun PriceDetailRow(&#10;    label: String,&#10;    value: String,&#10;    isBold: Boolean = false&#10;) {&#10;    Row(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(vertical = 4.dp),&#10;        horizontalArrangement = Arrangement.SpaceBetween&#10;    ) {&#10;        Text(&#10;            text = label,&#10;            fontSize = 14.sp,&#10;            fontWeight = if (isBold) FontWeight.Bold else FontWeight.Normal,&#10;            color = BlackText&#10;        )&#10;&#10;        Text(&#10;            text = value,&#10;            fontSize = 14.sp,&#10;            fontWeight = if (isBold) FontWeight.Bold else FontWeight.Normal,&#10;            color = BlackText&#10;        )&#10;    }&#10;}&#10;&#10;private fun formatPrice(price: Double): String {&#10;    val formatter = NumberFormat.getInstance(Locale.forLanguageTag(&quot;id-ID&quot;))&#10;    return formatter.format(price.toLong())&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;private fun DateTimePickerDialog(&#10;    onDismiss: () -&gt; Unit,&#10;    onDateTimeSelected: (String, String) -&gt; Unit,&#10;    isStart: Boolean,&#10;    @Suppress(&quot;UNUSED_PARAMETER&quot;) currentStartTime: String,&#10;    currentStartDate: String,&#10;    context: android.content.Context&#10;) {&#10;    val calendar = Calendar.getInstance()&#10;&#10;    // Parse current start date/time if available for end date validation&#10;    if (!isStart &amp;&amp; currentStartDate != &quot;00/00/0000&quot;) {&#10;        try {&#10;            val parts = currentStartDate.split(&quot;/&quot;)&#10;            if (parts.size == 3) {&#10;                calendar.set(parts[2].toInt(), parts[1].toInt() - 1, parts[0].toInt())&#10;            }&#10;        } catch (_: Exception) {&#10;            // Keep current date&#10;        }&#10;    }&#10;&#10;    val minDate = if (isStart) {&#10;        Calendar.getInstance().timeInMillis&#10;    } else {&#10;        // For end date, minimum is start date&#10;        calendar.timeInMillis&#10;    }&#10;&#10;    val datePickerState = rememberDatePickerState(&#10;        initialSelectedDateMillis = Calendar.getInstance().timeInMillis&#10;    )&#10;&#10;    var showTimePicker by remember { mutableStateOf(false) }&#10;&#10;    if (!showTimePicker) {&#10;        DatePickerDialog(&#10;            onDismissRequest = onDismiss,&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = {&#10;                        datePickerState.selectedDateMillis?.let { millis -&gt;&#10;                            // Validate date is not before minimum&#10;                            if (millis &gt;= minDate) {&#10;                                showTimePicker = true&#10;                            } else {&#10;                                Toast.makeText(&#10;                                    context,&#10;                                    &quot;Tidak dapat memilih tanggal yang sudah lewat&quot;,&#10;                                    Toast.LENGTH_SHORT&#10;                                ).show()&#10;                            }&#10;                        }&#10;                    }&#10;                ) {&#10;                    Text(&quot;Pilih Waktu&quot;)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = onDismiss) {&#10;                    Text(&quot;Batal&quot;)&#10;                }&#10;            }&#10;        ) {&#10;            DatePicker(state = datePickerState)&#10;        }&#10;    } else {&#10;        val timePickerState = rememberTimePickerState(&#10;            initialHour = 0,&#10;            initialMinute = 0,&#10;            is24Hour = true&#10;        )&#10;&#10;        androidx.compose.material3.AlertDialog(&#10;            onDismissRequest = onDismiss,&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = {&#10;                        datePickerState.selectedDateMillis?.let { millis -&gt;&#10;                            val selectedCalendar = Calendar.getInstance().apply {&#10;                                timeInMillis = millis&#10;                            }&#10;&#10;                            val dateString = SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault())&#10;                                .format(selectedCalendar.time)&#10;                            val timeString = String.format(Locale.getDefault(), &quot;%02d:%02d&quot;, timePickerState.hour, timePickerState.minute)&#10;&#10;                            // Validate time if same day&#10;                            val now = Calendar.getInstance()&#10;                            val isSameDay = selectedCalendar.get(Calendar.YEAR) == now.get(Calendar.YEAR) &amp;&amp;&#10;                                    selectedCalendar.get(Calendar.DAY_OF_YEAR) == now.get(Calendar.DAY_OF_YEAR)&#10;&#10;                            if (isSameDay) {&#10;                                val selectedHour = timePickerState.hour&#10;                                val selectedMinute = timePickerState.minute&#10;                                val currentHour = now.get(Calendar.HOUR_OF_DAY)&#10;                                val currentMinute = now.get(Calendar.MINUTE)&#10;&#10;                                if (selectedHour &gt; currentHour || (selectedHour == currentHour &amp;&amp; selectedMinute &gt;= currentMinute)) {&#10;                                    onDateTimeSelected(timeString, dateString)&#10;                                } else {&#10;                                    Toast.makeText(&#10;                                        context,&#10;                                        &quot;Tidak dapat memilih waktu yang sudah lewat&quot;,&#10;                                        Toast.LENGTH_SHORT&#10;                                    ).show()&#10;                                }&#10;                            } else {&#10;                                onDateTimeSelected(timeString, dateString)&#10;                            }&#10;                        }&#10;                    }&#10;                ) {&#10;                    Text(&quot;OK&quot;)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = onDismiss) {&#10;                    Text(&quot;Batal&quot;)&#10;                }&#10;            },&#10;            text = {&#10;                Column(&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    modifier = Modifier.fillMaxWidth()&#10;                ) {&#10;                    TimePicker(state = timePickerState)&#10;                }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;private fun TimePickerDialog(&#10;    onDismiss: () -&gt; Unit,&#10;    onTimeSelected: (String) -&gt; Unit,&#10;    isStart: Boolean,&#10;    currentStartTime: String,&#10;    context: android.content.Context&#10;) {&#10;    val now = Calendar.getInstance()&#10;    val currentHour = now.get(Calendar.HOUR_OF_DAY)&#10;    val currentMinute = now.get(Calendar.MINUTE)&#10;&#10;    // Parse start time for end time validation&#10;    var startHour = currentHour&#10;    var startMinute = currentMinute&#10;    if (!isStart &amp;&amp; currentStartTime != &quot;00:00&quot;) {&#10;        try {&#10;            val parts = currentStartTime.split(&quot;:&quot;)&#10;            if (parts.size == 2) {&#10;                startHour = parts[0].toInt()&#10;                startMinute = parts[1].toInt()&#10;            }&#10;        } catch (_: Exception) {&#10;            // Use current time&#10;        }&#10;    }&#10;&#10;    val minHour = if (isStart) currentHour else startHour&#10;    val minMinute = if (isStart) currentMinute else startMinute&#10;&#10;    val timePickerState = rememberTimePickerState(&#10;        initialHour = minHour,&#10;        initialMinute = minMinute,&#10;        is24Hour = true&#10;    )&#10;&#10;    androidx.compose.material3.AlertDialog(&#10;        onDismissRequest = onDismiss,&#10;        confirmButton = {&#10;            TextButton(&#10;                onClick = {&#10;                    val selectedHour = timePickerState.hour&#10;                    val selectedMinute = timePickerState.minute&#10;&#10;                    // Validate time&#10;                    val isValid = if (isStart) {&#10;                        selectedHour &gt; minHour || (selectedHour == minHour &amp;&amp; selectedMinute &gt;= minMinute)&#10;                    } else {&#10;                        selectedHour &gt; minHour || (selectedHour == minHour &amp;&amp; selectedMinute &gt; minMinute)&#10;                    }&#10;&#10;                    if (isValid) {&#10;                        val timeString = String.format(Locale.getDefault(), &quot;%02d:%02d&quot;, selectedHour, selectedMinute)&#10;                        onTimeSelected(timeString)&#10;                    } else {&#10;                        val message = if (isStart) {&#10;                            &quot;Tidak dapat memilih waktu yang sudah lewat&quot;&#10;                        } else {&#10;                            &quot;Waktu akhir harus lebih dari waktu mulai&quot;&#10;                        }&#10;                        Toast.makeText(context, message, Toast.LENGTH_SHORT).show()&#10;                    }&#10;                }&#10;            ) {&#10;                Text(&quot;OK&quot;)&#10;            }&#10;        },&#10;        dismissButton = {&#10;            TextButton(onClick = onDismiss) {&#10;                Text(&quot;Batal&quot;)&#10;            }&#10;        },&#10;        text = {&#10;            Column(&#10;                horizontalAlignment = Alignment.CenterHorizontally,&#10;                modifier = Modifier.fillMaxWidth()&#10;            ) {&#10;                TimePicker(state = timePickerState)&#10;            }&#10;        }&#10;    )&#10;}&#10;" />
              <option name="updatedContent" value="package com.example.petpal.presentation.view&#10;&#10;import androidx.compose.animation.core.animateFloatAsState&#10;import androidx.compose.animation.core.tween&#10;import androidx.compose.foundation.Image&#10;import androidx.compose.foundation.background&#10;import androidx.compose.foundation.clickable&#10;import androidx.compose.foundation.layout.*&#10;import androidx.compose.foundation.rememberScrollState&#10;import androidx.compose.foundation.shape.RoundedCornerShape&#10;import androidx.compose.foundation.verticalScroll&#10;import androidx.compose.material3.DatePicker&#10;import androidx.compose.material3.DatePickerDialog&#10;import androidx.compose.material3.ExperimentalMaterial3Api&#10;import androidx.compose.material3.HorizontalDivider&#10;import androidx.compose.material3.IconButton&#10;import androidx.compose.material3.TextButton&#10;import androidx.compose.material3.TimePicker&#10;import androidx.compose.material3.rememberDatePickerState&#10;import androidx.compose.material3.rememberTimePickerState&#10;import androidx.compose.material3.OutlinedTextField&#10;import androidx.compose.material3.OutlinedTextFieldDefaults&#10;import androidx.compose.material3.Text&#10;import androidx.compose.runtime.*&#10;import androidx.compose.ui.Alignment&#10;import androidx.compose.ui.Modifier&#10;import androidx.compose.ui.draw.rotate&#10;import androidx.compose.ui.platform.LocalContext&#10;import androidx.compose.ui.res.painterResource&#10;import androidx.compose.ui.text.font.FontWeight&#10;import androidx.compose.ui.unit.dp&#10;import androidx.compose.ui.unit.sp&#10;import android.widget.Toast&#10;import com.example.petpal.R&#10;import com.example.petpal.presentation.component.DurationField&#10;import com.example.petpal.presentation.component.OrderFormField&#10;import com.example.petpal.presentation.theme.BlackText&#10;import com.example.petpal.presentation.theme.GrayText&#10;import com.example.petpal.presentation.theme.PetPalDarkGreen&#10;import com.example.petpal.presentation.theme.White&#10;import java.text.NumberFormat&#10;import java.text.SimpleDateFormat&#10;import java.util.Calendar&#10;import java.util.Locale&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;fun OrderFormScreen(&#10;    serviceType: String,&#10;    onNavigateBack: () -&gt; Unit,&#10;    onSelectPet: () -&gt; Unit = {},&#10;    onSelectTier: () -&gt; Unit = {},&#10;    onSelectBranch: () -&gt; Unit = {},&#10;    onSubmitOrder: () -&gt; Unit = {}&#10;) {&#10;    val context = LocalContext.current&#10;&#10;    // Get current date for Daycare service&#10;    val currentCalendar = Calendar.getInstance()&#10;    val currentDateString = SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault()).format(currentCalendar.time)&#10;&#10;    // Form state&#10;    var selectedPet by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    var startTime by remember { mutableStateOf(&quot;00:00&quot;) }&#10;    var startDate by remember { mutableStateOf(if (serviceType == &quot;Daycare&quot;) currentDateString else &quot;00/00/0000&quot;) }&#10;    var endTime by remember { mutableStateOf(&quot;00:00&quot;) }&#10;    var endDate by remember { mutableStateOf(if (serviceType == &quot;Daycare&quot;) currentDateString else &quot;00/00/0000&quot;) }&#10;    var selectedTier by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    var selectedBranch by remember { mutableStateOf&lt;String?&gt;(null) }&#10;    var note by remember { mutableStateOf(&quot;&quot;) }&#10;    var isPriceExpanded by remember { mutableStateOf(false) }&#10;&#10;    // Dialog states&#10;    var showStartDatePicker by remember { mutableStateOf(false) }&#10;    var showStartTimePicker by remember { mutableStateOf(false) }&#10;    var showEndDatePicker by remember { mutableStateOf(false) }&#10;    var showEndTimePicker by remember { mutableStateOf(false) }&#10;&#10;    // Calculate total price&#10;    val tierPrices = mapOf(&#10;        &quot;Regular&quot; to 50000.0,&#10;        &quot;VIP&quot; to 75000.0,&#10;        &quot;VVIP&quot; to 100000.0&#10;    )&#10;&#10;    // Mock duration calculation (will be replaced with actual datetime calculation)&#10;    val durationHours = 0 // TODO: Calculate from actual start and end times&#10;    val tierPrice = selectedTier?.let { tierPrices[it] } ?: 0.0&#10;    val totalPrice = durationHours * tierPrice&#10;&#10;    // Check if form is complete&#10;    val isFormComplete = selectedPet != null &amp;&amp;&#10;                         startTime != &quot;00:00&quot; &amp;&amp;&#10;                         endTime != &quot;00:00&quot; &amp;&amp;&#10;                         selectedTier != null &amp;&amp;&#10;                         selectedBranch != null&#10;&#10;    val scrollState = rememberScrollState()&#10;    val iconRotation by animateFloatAsState(&#10;        targetValue = if (isPriceExpanded) 180f else 0f,&#10;        animationSpec = tween(durationMillis = 300),&#10;        label = &quot;icon rotation&quot;&#10;    )&#10;&#10;    Column(&#10;        modifier = Modifier&#10;            .fillMaxSize()&#10;            .background(White)&#10;            .windowInsetsPadding(WindowInsets.systemBars)&#10;    ) {&#10;        // Header&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .padding(16.dp)&#10;        ) {&#10;            IconButton(&#10;                onClick = onNavigateBack,&#10;                modifier = Modifier.align(Alignment.CenterStart)&#10;            ) {&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.icon_close_foreground),&#10;                    contentDescription = &quot;Close&quot;,&#10;                    modifier = Modifier.size(24.dp)&#10;                )&#10;            }&#10;&#10;            Text(&#10;                text = &quot;Buat Pesanan&quot;,&#10;                fontSize = 20.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = BlackText,&#10;                modifier = Modifier.align(Alignment.Center)&#10;            )&#10;        }&#10;&#10;        // Scrollable content&#10;        Column(&#10;            modifier = Modifier&#10;                .weight(1f)&#10;                .verticalScroll(scrollState)&#10;                .padding(horizontal = 24.dp)&#10;        ) {&#10;            // Pet Selection&#10;            OrderFormField(&#10;                iconRes = R.drawable.icon_petoption_foreground,&#10;                label = &quot;Hewan Peliharaan&quot;,&#10;                value = selectedPet ?: &quot;Pilih hewan peliharaanmu&quot;,&#10;                onClick = onSelectPet,&#10;                isPlaceholder = selectedPet == null,&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Duration Section&#10;            Text(&#10;                text = &quot;Durasi&quot;,&#10;                fontSize = 16.sp,&#10;                fontWeight = FontWeight.Bold,&#10;                color = BlackText,&#10;                modifier = Modifier.padding(bottom = 8.dp)&#10;            )&#10;&#10;            // Start Duration&#10;            DurationField(&#10;                label = &quot;Dari :&quot;,&#10;                time = startTime,&#10;                date = startDate,&#10;                onClick = {&#10;                    if (serviceType == &quot;Boarding&quot;) {&#10;                        showStartDatePicker = true&#10;                    } else {&#10;                        showStartTimePicker = true&#10;                    }&#10;                },&#10;                modifier = Modifier.padding(bottom = 12.dp)&#10;            )&#10;&#10;            // End Duration&#10;            DurationField(&#10;                label = &quot;Sampai :&quot;,&#10;                time = endTime,&#10;                date = endDate,&#10;                onClick = {&#10;                    if (serviceType == &quot;Boarding&quot;) {&#10;                        showEndDatePicker = true&#10;                    } else {&#10;                        showEndTimePicker = true&#10;                    }&#10;                },&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Service Tier&#10;            OrderFormField(&#10;                iconRes = R.drawable.icon_tier_foreground,&#10;                label = &quot;Tingkat Layanan&quot;,&#10;                value = selectedTier ?: &quot;Tingkat Layanan&quot;,&#10;                onClick = onSelectTier,&#10;                isPlaceholder = selectedTier == null,&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Branch&#10;            OrderFormField(&#10;                iconRes = R.drawable.icon_branch_foreground,&#10;                label = &quot;Cabang&quot;,&#10;                value = selectedBranch ?: &quot;Cabang&quot;,&#10;                onClick = onSelectBranch,&#10;                isPlaceholder = selectedBranch == null,&#10;                modifier = Modifier.padding(bottom = 24.dp)&#10;            )&#10;&#10;            // Notes&#10;            Column(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .padding(bottom = 24.dp)&#10;            ) {&#10;                Text(&#10;                    text = &quot;Catatan&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = BlackText,&#10;                    modifier = Modifier.padding(bottom = 8.dp)&#10;                )&#10;&#10;                OutlinedTextField(&#10;                    value = note,&#10;                    onValueChange = { note = it },&#10;                    placeholder = {&#10;                        Row(&#10;                            verticalAlignment = Alignment.CenterVertically,&#10;                            horizontalArrangement = Arrangement.spacedBy(8.dp)&#10;                        ) {&#10;                            Image(&#10;                                painter = painterResource(id = R.drawable.icon_note_foreground),&#10;                                contentDescription = &quot;Note icon&quot;,&#10;                                modifier = Modifier.size(16.dp)&#10;                            )&#10;                            Text(&#10;                                text = &quot;Ketik catatanmu di sini&quot;,&#10;                                color = GrayText,&#10;                                fontSize = 14.sp&#10;                            )&#10;                        }&#10;                    },&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .height(100.dp),&#10;                    shape = RoundedCornerShape(12.dp),&#10;                    colors = OutlinedTextFieldDefaults.colors(&#10;                        unfocusedBorderColor = GrayText.copy(alpha = 0.3f),&#10;                        focusedBorderColor = PetPalDarkGreen,&#10;                        unfocusedContainerColor = GrayText.copy(alpha = 0.1f),&#10;                        focusedContainerColor = GrayText.copy(alpha = 0.1f),&#10;                        unfocusedTextColor = BlackText,&#10;                        focusedTextColor = BlackText&#10;                    )&#10;                )&#10;            }&#10;        }&#10;&#10;        // Date/Time Pickers&#10;        if (showStartDatePicker) {&#10;            DateTimePickerDialog(&#10;                onDismiss = { showStartDatePicker = false },&#10;                onDateTimeSelected = { time, date -&gt;&#10;                    startTime = time&#10;                    startDate = date&#10;                    showStartDatePicker = false&#10;                },&#10;                isStart = true,&#10;                currentStartTime = startTime,&#10;                currentStartDate = startDate,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        if (showStartTimePicker) {&#10;            TimePickerDialog(&#10;                onDismiss = { showStartTimePicker = false },&#10;                onTimeSelected = { time -&gt;&#10;                    startTime = time&#10;                    showStartTimePicker = false&#10;                },&#10;                isStart = true,&#10;                currentStartTime = startTime,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        if (showEndDatePicker) {&#10;            DateTimePickerDialog(&#10;                onDismiss = { showEndDatePicker = false },&#10;                onDateTimeSelected = { time, date -&gt;&#10;                    endTime = time&#10;                    endDate = date&#10;                    showEndDatePicker = false&#10;                },&#10;                isStart = false,&#10;                currentStartTime = startTime,&#10;                currentStartDate = startDate,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        if (showEndTimePicker) {&#10;            TimePickerDialog(&#10;                onDismiss = { showEndTimePicker = false },&#10;                onTimeSelected = { time -&gt;&#10;                    endTime = time&#10;                    showEndTimePicker = false&#10;                },&#10;                isStart = false,&#10;                currentStartTime = startTime,&#10;                context = context&#10;            )&#10;        }&#10;&#10;        // Price Section - Sticky above button&#10;        Column(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .background(White)&#10;                .padding(horizontal = 24.dp)&#10;        ) {&#10;            // Total Price Header (Clickable)&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .clickable { isPriceExpanded = !isPriceExpanded }&#10;                    .padding(vertical = 8.dp),&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Text(&#10;                    text = &quot;Total Harga : Rp ${formatPrice(totalPrice)}&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = BlackText,&#10;                    modifier = Modifier.weight(1f)&#10;                )&#10;&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.icon_pricedetail_foreground),&#10;                    contentDescription = &quot;Price detail&quot;,&#10;                    modifier = Modifier&#10;                        .size(20.dp)&#10;                        .rotate(iconRotation)&#10;                )&#10;            }&#10;&#10;            // Expanded Price Details&#10;            if (isPriceExpanded) {&#10;                Column(&#10;                    modifier = Modifier&#10;                        .fillMaxWidth()&#10;                        .padding(top = 12.dp)&#10;                ) {&#10;                    HorizontalDivider(&#10;                        color = GrayText.copy(alpha = 0.3f),&#10;                        modifier = Modifier.padding(bottom = 12.dp)&#10;                    )&#10;&#10;                    PriceDetailRow(&#10;                        label = &quot;Durasi&quot;,&#10;                        value = &quot;$durationHours jam&quot;&#10;                    )&#10;&#10;                    PriceDetailRow(&#10;                        label = &quot;Harga per jam&quot;,&#10;                        value = &quot;Rp ${formatPrice(tierPrice)}&quot;&#10;                    )&#10;&#10;                    HorizontalDivider(&#10;                        color = GrayText.copy(alpha = 0.3f),&#10;                        modifier = Modifier.padding(vertical = 12.dp)&#10;                    )&#10;&#10;                    PriceDetailRow(&#10;                        label = &quot;Total&quot;,&#10;                        value = &quot;Rp ${formatPrice(totalPrice)}&quot;,&#10;                        isBold = true&#10;                    )&#10;                }&#10;            }&#10;        }&#10;&#10;        // Bottom Button&#10;        Box(&#10;            modifier = Modifier&#10;                .fillMaxWidth()&#10;                .background(White)&#10;                .padding(horizontal = 24.dp)&#10;                .padding(bottom = 24.dp, top = 8.dp)&#10;        ) {&#10;            Row(&#10;                modifier = Modifier&#10;                    .fillMaxWidth()&#10;                    .background(&#10;                        color = if (isFormComplete) PetPalDarkGreen else GrayText.copy(alpha = 0.5f),&#10;                        shape = RoundedCornerShape(32.dp)&#10;                    )&#10;                    .clickable(enabled = isFormComplete) {&#10;                        if (isFormComplete) onSubmitOrder()&#10;                    }&#10;                    .padding(16.dp),&#10;                horizontalArrangement = Arrangement.Center,&#10;                verticalAlignment = Alignment.CenterVertically&#10;            ) {&#10;                Image(&#10;                    painter = painterResource(id = R.drawable.icon_arrowright),&#10;                    contentDescription = null,&#10;                    modifier = Modifier.size(20.dp)&#10;                )&#10;&#10;                Spacer(modifier = Modifier.width(8.dp))&#10;&#10;                Text(&#10;                    text = &quot;Lakukan Pembayaran&quot;,&#10;                    fontSize = 16.sp,&#10;                    fontWeight = FontWeight.Bold,&#10;                    color = White&#10;                )&#10;            }&#10;        }&#10;    }&#10;}&#10;&#10;@Composable&#10;private fun PriceDetailRow(&#10;    label: String,&#10;    value: String,&#10;    isBold: Boolean = false&#10;) {&#10;    Row(&#10;        modifier = Modifier&#10;            .fillMaxWidth()&#10;            .padding(vertical = 4.dp),&#10;        horizontalArrangement = Arrangement.SpaceBetween&#10;    ) {&#10;        Text(&#10;            text = label,&#10;            fontSize = 14.sp,&#10;            fontWeight = if (isBold) FontWeight.Bold else FontWeight.Normal,&#10;            color = BlackText&#10;        )&#10;&#10;        Text(&#10;            text = value,&#10;            fontSize = 14.sp,&#10;            fontWeight = if (isBold) FontWeight.Bold else FontWeight.Normal,&#10;            color = BlackText&#10;        )&#10;    }&#10;}&#10;&#10;private fun formatPrice(price: Double): String {&#10;    val formatter = NumberFormat.getInstance(Locale.forLanguageTag(&quot;id-ID&quot;))&#10;    return formatter.format(price.toLong())&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;private fun DateTimePickerDialog(&#10;    onDismiss: () -&gt; Unit,&#10;    onDateTimeSelected: (String, String) -&gt; Unit,&#10;    isStart: Boolean,&#10;    @Suppress(&quot;UNUSED_PARAMETER&quot;) currentStartTime: String,&#10;    currentStartDate: String,&#10;    context: android.content.Context&#10;) {&#10;    val calendar = Calendar.getInstance()&#10;&#10;    // Parse current start date/time if available for end date validation&#10;    if (!isStart &amp;&amp; currentStartDate != &quot;00/00/0000&quot;) {&#10;        try {&#10;            val parts = currentStartDate.split(&quot;/&quot;)&#10;            if (parts.size == 3) {&#10;                calendar.set(parts[2].toInt(), parts[1].toInt() - 1, parts[0].toInt())&#10;            }&#10;        } catch (_: Exception) {&#10;            // Keep current date&#10;        }&#10;    }&#10;&#10;    val now = Calendar.getInstance()&#10;    val todayStart = Calendar.getInstance().apply {&#10;        set(Calendar.HOUR_OF_DAY, 0)&#10;        set(Calendar.MINUTE, 0)&#10;        set(Calendar.SECOND, 0)&#10;        set(Calendar.MILLISECOND, 0)&#10;    }&#10;    &#10;    val minDate = if (isStart) {&#10;        // For start date, allow today (but will validate time later)&#10;        todayStart.timeInMillis&#10;    } else {&#10;        // For end date, minimum is start date&#10;        calendar.timeInMillis&#10;    }&#10;&#10;    val datePickerState = rememberDatePickerState(&#10;        initialSelectedDateMillis = Calendar.getInstance().timeInMillis&#10;    )&#10;&#10;    var showTimePicker by remember { mutableStateOf(false) }&#10;&#10;    if (!showTimePicker) {&#10;        DatePickerDialog(&#10;            onDismissRequest = onDismiss,&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = {&#10;                        datePickerState.selectedDateMillis?.let { millis -&gt;&#10;                            // Validate date is not before minimum&#10;                            if (millis &gt;= minDate) {&#10;                                showTimePicker = true&#10;                            } else {&#10;                                Toast.makeText(&#10;                                    context,&#10;                                    &quot;Tidak dapat memilih tanggal yang sudah lewat&quot;,&#10;                                    Toast.LENGTH_SHORT&#10;                                ).show()&#10;                            }&#10;                        }&#10;                    }&#10;                ) {&#10;                    Text(&quot;Pilih Waktu&quot;)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = onDismiss) {&#10;                    Text(&quot;Batal&quot;)&#10;                }&#10;            }&#10;        ) {&#10;            DatePicker(state = datePickerState)&#10;        }&#10;    } else {&#10;        val timePickerState = rememberTimePickerState(&#10;            initialHour = 0,&#10;            initialMinute = 0,&#10;            is24Hour = true&#10;        )&#10;&#10;        androidx.compose.material3.AlertDialog(&#10;            onDismissRequest = onDismiss,&#10;            confirmButton = {&#10;                TextButton(&#10;                    onClick = {&#10;                        datePickerState.selectedDateMillis?.let { millis -&gt;&#10;                            val selectedCalendar = Calendar.getInstance().apply {&#10;                                timeInMillis = millis&#10;                            }&#10;&#10;                            val dateString = SimpleDateFormat(&quot;dd/MM/yyyy&quot;, Locale.getDefault())&#10;                                .format(selectedCalendar.time)&#10;                            val timeString = String.format(Locale.getDefault(), &quot;%02d:%02d&quot;, timePickerState.hour, timePickerState.minute)&#10;&#10;                            // Validate time if same day&#10;                            val isSameDay = selectedCalendar.get(Calendar.YEAR) == now.get(Calendar.YEAR) &amp;&amp;&#10;                                    selectedCalendar.get(Calendar.DAY_OF_YEAR) == now.get(Calendar.DAY_OF_YEAR)&#10;&#10;                            if (isSameDay) {&#10;                                val selectedHour = timePickerState.hour&#10;                                val selectedMinute = timePickerState.minute&#10;                                val currentHour = now.get(Calendar.HOUR_OF_DAY)&#10;                                val currentMinute = now.get(Calendar.MINUTE)&#10;&#10;                                if (selectedHour &gt; currentHour || (selectedHour == currentHour &amp;&amp; selectedMinute &gt;= currentMinute)) {&#10;                                    onDateTimeSelected(timeString, dateString)&#10;                                } else {&#10;                                    Toast.makeText(&#10;                                        context,&#10;                                        &quot;Tidak dapat memilih waktu yang sudah lewat&quot;,&#10;                                        Toast.LENGTH_SHORT&#10;                                    ).show()&#10;                                }&#10;                            } else {&#10;                                onDateTimeSelected(timeString, dateString)&#10;                            }&#10;                        }&#10;                    }&#10;                ) {&#10;                    Text(&quot;OK&quot;)&#10;                }&#10;            },&#10;            dismissButton = {&#10;                TextButton(onClick = onDismiss) {&#10;                    Text(&quot;Batal&quot;)&#10;                }&#10;            },&#10;            text = {&#10;                Column(&#10;                    horizontalAlignment = Alignment.CenterHorizontally,&#10;                    modifier = Modifier.fillMaxWidth()&#10;                ) {&#10;                    TimePicker(state = timePickerState)&#10;                }&#10;            }&#10;        )&#10;    }&#10;}&#10;&#10;@OptIn(ExperimentalMaterial3Api::class)&#10;@Composable&#10;private fun TimePickerDialog(&#10;    onDismiss: () -&gt; Unit,&#10;    onTimeSelected: (String) -&gt; Unit,&#10;    isStart: Boolean,&#10;    currentStartTime: String,&#10;    context: android.content.Context&#10;) {&#10;    val now = Calendar.getInstance()&#10;    val currentHour = now.get(Calendar.HOUR_OF_DAY)&#10;    val currentMinute = now.get(Calendar.MINUTE)&#10;&#10;    // Parse start time for end time validation&#10;    var startHour = currentHour&#10;    var startMinute = currentMinute&#10;    if (!isStart &amp;&amp; currentStartTime != &quot;00:00&quot;) {&#10;        try {&#10;            val parts = currentStartTime.split(&quot;:&quot;)&#10;            if (parts.size == 2) {&#10;                startHour = parts[0].toInt()&#10;                startMinute = parts[1].toInt()&#10;            }&#10;        } catch (_: Exception) {&#10;            // Use current time&#10;        }&#10;    }&#10;&#10;    val minHour = if (isStart) currentHour else startHour&#10;    val minMinute = if (isStart) currentMinute else startMinute&#10;&#10;    val timePickerState = rememberTimePickerState(&#10;        initialHour = minHour,&#10;        initialMinute = minMinute,&#10;        is24Hour = true&#10;    )&#10;&#10;    androidx.compose.material3.AlertDialog(&#10;        onDismissRequest = onDismiss,&#10;        confirmButton = {&#10;            TextButton(&#10;                onClick = {&#10;                    val selectedHour = timePickerState.hour&#10;                    val selectedMinute = timePickerState.minute&#10;&#10;                    // Validate time&#10;                    val isValid = if (isStart) {&#10;                        selectedHour &gt; minHour || (selectedHour == minHour &amp;&amp; selectedMinute &gt;= minMinute)&#10;                    } else {&#10;                        selectedHour &gt; minHour || (selectedHour == minHour &amp;&amp; selectedMinute &gt; minMinute)&#10;                    }&#10;&#10;                    if (isValid) {&#10;                        val timeString = String.format(Locale.getDefault(), &quot;%02d:%02d&quot;, selectedHour, selectedMinute)&#10;                        onTimeSelected(timeString)&#10;                    } else {&#10;                        val message = if (isStart) {&#10;                            &quot;Tidak dapat memilih waktu yang sudah lewat&quot;&#10;                        } else {&#10;                            &quot;Waktu akhir harus lebih dari waktu mulai&quot;&#10;                        }&#10;                        Toast.makeText(context, message, Toast.LENGTH_SHORT).show()&#10;                    }&#10;                }&#10;            ) {&#10;                Text(&quot;OK&quot;)&#10;            }&#10;        },&#10;        dismissButton = {&#10;            TextButton(onClick = onDismiss) {&#10;                Text(&quot;Batal&quot;)&#10;            }&#10;        },&#10;        text = {&#10;            Column(&#10;                horizontalAlignment = Alignment.CenterHorizontally,&#10;                modifier = Modifier.fillMaxWidth()&#10;            ) {&#10;                TimePicker(state = timePickerState)&#10;            }&#10;        }&#10;    )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>